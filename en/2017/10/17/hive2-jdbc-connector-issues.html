<!doctype html><html lang=en dir=content/en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta http-equiv=content-security-policy content="upgrade-insecure-requests">
<title> Problems with HiveServer2 due to the JDBC version - Loving life and dreams. </title>
<meta name=keywords content="Blog,Software,Big Data,Product,Architecture,Java,Kylin">
<meta name=author content="Elkan.Li">
<meta property="og:title" content="Problems with HiveServer2 due to the JDBC version">
<meta property="og:site_name" content="Loving life and dreams.">
<meta property="og:image" content="/img/author.jpg">
<meta name=title content="Problems with HiveServer2 due to the JDBC version - Loving life and dreams.">
<meta name=description content="Weclome to Elkan's blog site that who is best on program develop, pre-sales and big data.">
<link rel="shortcut icon" href=/img/favicon.ico>
<link rel=apple-touch-icon href=/img/apple-touch-icon.png>
<link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png>
<link href=//cdn.bootcdn.net/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css rel=stylesheet type=text/css>
<link href=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.css rel=stylesheet>
<link href=/css/main.css rel=stylesheet type=text/css>
<link href=/css/syntax.css rel=stylesheet type=text/css>
<script type=text/javascript>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?9b021cbfb58b35e79012f9690de1c6ab",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-61491374-4"></script>
<script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-61491374-4 ')</script>
</head>
<body itemscope itemtype=http://schema.org/WebPage lang=zh-hans>
<div class="container one-collumn sidebar-position-left page-home">
<div class=headband></div>
<header id=header class=header itemscope itemtype=http://schema.org/WPHeader>
<div class=header-inner> <div class=site-brand-container>
<div class=site-nav-toggle>
<div class=toggle role=button style=opacity:1;top:0>
<span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span>
</div>
</div>
<div class=site-meta>
<div class=multi-lang-switch>
<i class="fa fa-fw fa-language" style=margin-right:5px></i>
<a class=lang-link id=zh-cn href=https://lisenhui.cn/2017/10/17/hive2-jdbc-connector-issues.html>中文</a>
<span class=lang-line> / </span>
<a class=lang-link id=en href=#>English</a>
</div>
<div class=custom-logo-site-title>
<a href=/en/ class=brand rel=start>
<span class=logo-line-before><i></i></span>
<span class=site-title>Loving life and dreams.</span>
<span class=logo-line-after><i></i></span>
</a>
</div>
<p class=site-subtitle>Don't stop running forward!</p>
</div>
<div class=site-nav-right>
<div class="toggle popup-trigger" style=opacity:1;top:0>
<i class="fa fa-search fa-fw fa-lg"></i>
</div>
</div>
</div>
<nav class=site-nav>
<ul id=menu class=menu>
<li class=menu-item>
<a href=/en/ rel=section>
<i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home
</a>
</li>
<li class=menu-item>
<a href=/en/post rel=section>
<i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archive
</a>
</li>
<li class=menu-item>
<a href=/en/about.html rel=section>
<i class="menu-item-icon fa fa-fw fa-user"></i> <br>About
</a>
</li>
<li class=menu-item>
<a href=/en/404.html rel=section target=_blank>
<i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>Page404
</a>
</li>
<li class="menu-item menu-item-search">
<a href=javascript:; class=popup-trigger> <i class="menu-item-icon fa fa-search fa-fw"></i> <br> Search</a>
</li>
</ul>
<div class=site-search>
<div class="popup search-popup local-search-popup">
<div class="local-search-header clearfix">
<span class=search-icon><i class="fa fa-search"></i> </span>
<span class=popup-btn-close><i class="fa fa-times-circle"></i></span>
<div class=local-search-input-wrapper>
<input autocomplete=off placeholder="Enter key words..." spellcheck=false type=text id=local-search-input autocapitalize=none autocorrect=off>
</div>
</div>
<div id=local-search-result></div>
</div>
</div>
</nav>
</div>
</header>
<main id=main class=main>
<div class=main-inner>
<div class=content-wrap>
<div id=content class=content>
<section id=posts class=posts-expand>
<article class="post post-type-normal" itemscope itemtype=http://schema.org/Article>
<header class=post-header>
<h1 class=post-title itemprop="name headline">
<a class=post-title-link href=https://lisenhui.cn/en/2017/10/17/hive2-jdbc-connector-issues.html itemprop=url>
Problems with HiveServer2 due to the JDBC version
</a>
</h1>
<div class=post-meta>
<span class=post-time>
<i class="fa fa-calendar-o fa-fw"></i>
<span class=post-meta-item-text>Published at:</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2017-10-17">
2017-10-17
</time>
</span>
<span class=post-category>
&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i>
<span class=post-meta-item-text>Categories:</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing>
<a href=/en/categories/big-data itemprop=url rel=index style=text-decoration:underline>
<span itemprop=name>Big data</span>
</a>
&nbsp;
</span>
</span>
<span>
|
<i class="fa fa-file-word-o fa-fw"></i>
<span class=post-meta-item-text>Words:</span>
<span class=leancloud-world-count>583 words</span>
</span>
<span>
|
<i class="fa fa-eye fa-fw"></i>
<span class=post-meta-item-text>Reading:</span>
<span class=leancloud-view-count>3 minutes</span>
</span>
<span id=/en/2017/10/17/hive2-jdbc-connector-issues.html class=leancloud_visitors data-flag-title="Problems with HiveServer2 due to the JDBC version">
|
<i class="fa fa-binoculars fa-fw"></i>
<span class=post-meta-item-text>Visited:</span>
<span class=leancloud-visitors-count></span>
</span>
</div>
</header>
<div class=post-body itemprop=articleBody>
<p>Previously, &lsquo;HDP&rsquo; was used to build and manage the &lsquo;Hadoop&rsquo; environment, and there were no difficult problems when the installation was debugged, but this time it was a strange problem when it was deployed on the &lsquo;Centos6x&rsquo; system:</p>
<p>On the face of it, the Hive service is functioning normally, the process is running normally, the page UI is normal, and the logs are not output incorrectly. Simple table-building statements can be executed, which can be caused by throwing exceptions when importing local/HDFSdata. The wrong stack information is as follows:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;OPTION SQL_SELECT_LIMIT=DEFAULT&#39; at line 1 
</code></pre></div><p>Another problem is that the HDFS data import prompt file does not exist using the&rsquo;HiveView&rsquo;UI provided by Ambari,with the error message as follows:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: SemanticException Line 1:17 Invalid path &#39;&#39;/tmp/xxx/xxxxx.csv&#39;&#39;: No files matching path hdfs:/...
</code></pre></div><p>Briefly describe the environment used:</p>
<p>Hive - 1.2.1000</p>
<p>MySQL - 5.6.17</p>
<p>MySQL JDBC - 5.1.17</p>
<p>Question one</p>
<p>The information from the error can obviously be known to be a syntax error problem, but the trouble is that it did not print out the problematic SQL statement, through google found the same problem article, which pointed out that this is mySQL JDBC driver 5.1.17 version below the BUG, only need to update the JDBC driver version. Then it seems that the problem becomes simple, find the new JDBC driver file, and do the following:</p>
<ul>
<li>Copy-driven files</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Copy to the resource directory of Amabri  Server
  mv mysql-connector-java-5.1.44.jar /var/lib/ambari-server/resources/mysql-connector-java-5.1.44.jar
  ln -s -f /var/lib/ambari-server/resources/mysql-connector-java-5.1.44.jar /var/lib/ambari-server/resources/mysql-connector-java.jar
  Copy to the share directory
  mv mysql-connector-java-5.1.44.jar /usr/share/java/mysql-connector-java-5.1.44.jar
  ln -s -f /usr/share/java/mysql-connector-java-5.1.44.jar /usr/share/java/mysql-connector-java.jar
</code></pre></div><ul>
<li>Reset the Ambari driver reference</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>  ambari-server setup --jdbc-db<span style=color:#666>=</span>mysql --jdbc-driver<span style=color:#666>=</span>/usr/share/java/mysql-connector-java.jar
</code></pre></div><ul>
<li>Remove the old driver above the Ambari Agent and restart it</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>  Note the path to backup and deletion
  rm -rf /var/lib/ambari-agent/tmp/mysql-* 
  Restart the service
  ambari-agent restart
</code></pre></div><ul>
<li>Restart the Hive component service on the Ambari UI</li>
</ul>
<p>Theoretically there are these operations can solve the problem, but after running the data import is still the same problem, indicating that the above file update operation did not succeed, switch to the Hive Master machine to find the driver file in the lib directory, decompression found that the version is really not changed, then can only be manually forced to replace, the Hive Master, Slave machine drive all replaced with the latest version, and then restart the Hive component service, and then a new problem.</p>
<p>Question two</p>
<p>It is not possible to determine the problem itself from the log above alone, because it is possible to determine with certainty that the file exists on top of HDFS. So switch to the Hive service log and find the following log:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>ERROR [HiveServer2-Background-Pool: Thread-4456]: hdfs. KeyProviderCache (KeyProviderCache.java:createKeyProviderURI(87)) - Could not find uri with key [dfs.encryption.key.provider.uri] to create a keyProvider !!
ERROR [HiveServer2-Background-Pool: Thread-4456]: metadata. Hive (Hive.java:copyFiles(2853)) - Failed to move: org.apache.hadoop.security.AccessControlException: Permission denied. user=admin is not the owner of inode=xxxxx.csv
  at org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.checkOwner(FSPermissionChecker.java:250)
  at org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.checkPermission(FSPermissionChecker.java:227)
</code></pre></div><p>It is clear from this log that there is a problem with user rights, but there is a bit of a puzzle here as to why Ambari Hive View does not operate directly with super users and can now only be the source of forced changes to the file, as follows:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>hdfs dfs -chown hdfs:hadoop /tmp/XXX/XXX.CSV
</code></pre></div><p>At this point, all the problems are fixed, the import operation is re-executed, everything is working properly, and the data is successfully imported.</p>
<p>Reference quote:</p>
<ul>
<li><a href=https://community.hortonworks.com/articles/70912/hive-metastore-not-working-syntax-error-option-sql.html>hive-metastore-not-working-syntax-error-option-sql</a></li>
</ul>
</div>
<footer class=post-footer>
<div class=post-tags>
<a href=/en/tags/big-data rel=tag title="Big data">#Big data#</a>
<a href=/en/tags/hive rel=tag title=Hive>#Hive#</a>
<a href=/en/tags/ambari rel=tag title=Ambari>#Ambari#</a>
</div>
<div class=addthis_inline_share_toolbox></div>
<div class=post-nav>
<div class=article-copyright>
<div class=article-copyright-img>
<img src=/img/qq_qrcode.png width=129px height=129px>
<div style=text-align:center>QQ QrCode</div>
</div>
<div class=article-copyright-info>
<p>
<span>Declaration：</span>Problems with HiveServer2 due to the JDBC version
</p>
<p>
<span>Link：</span>https://lisenhui.cn/en/2017/10/17/hive2-jdbc-connector-issues.html
</p>
<p>
<span>Author：</span>Elkan.Li
</p>
<p>
<span>Declaration： </span>This blog post article is under the <a href=https://creativecommons.org/licenses/by-nc-sa/3.0/ target=_blank style=text-decoration:underline>CC BY-NC-SA 3.0</a> license,Please indicate the source!
</p>
</div>
</div>
<div class=clear></div>
</div>
<div class=reward-qr-info>
<div>If it can help you, you can give tips for blogger that how much you want. ^_^</div>
<button id=rewardButton disable=enable onclick="var qr=document.getElementById('QR');qr.style.display==='none'?qr.style.display='block':qr.style.display='none'">
<span>Reward</span>
</button>
<div id=QR style=display:none>
<div id=wechat style=display:inline-block>
<img id=wechat_qr src=/img/wechat-pay.png alt="WeChat Pay">
<p>Wechat Pay</p>
</div>
<div id=alipay style=display:inline-block>
<img id=alipay_qr src=/img/ali-pay.png alt=Alipay>
<p>Ali Pay</p>
</div>
</div>
</div>
<div class=post-nav>
<div class="post-nav-next post-nav-item">
<a href=https://lisenhui.cn/en/2017/10/18/ambari-monitor-status-issues.html rel=next title="An issue with the service in Ambari that is functioning properly but the service stops">
<i class="fa fa-chevron-left"></i> An issue with the service in Ambari that is functioning properly but the service stops
</a>
</div>
<div class="post-nav-prev post-nav-item">
<a href=https://lisenhui.cn/en/2017/09/09/azkaban-execute-jobs.html rel=prev title="The job types and examples supported by Azkaban">
The job types and examples supported by Azkaban
<i class="fa fa-chevron-right"></i>
</a>
</div>
</div>
<div id=wcomments></div>
</footer>
</article>
</section>
</div>
</div>
<div class=sidebar-toggle>
<div class=sidebar-toggle-line-wrap>
<span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
</div>
</div>
<aside id=sidebar class=sidebar>
<div class=sidebar-inner>
<section class="site-overview sidebar-panel sidebar-panel-active">
<div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person>
<img class=site-author-image itemprop=image src=/img/avatar.png alt=Elkan.Li>
<p class=site-author-name itemprop=name>Elkan.Li</p>
<p class="site-description motion-element" itemprop=description>
Never forget your dreams！
</p>
</div>
<nav class="site-state motion-element">
<div class="site-state-item site-state-posts">
<a href=/en/post/>
<span class=site-state-item-count>51</span>
<span class=site-state-item-name>Blogs</span>
</a>
</div>
<div class="site-state-item site-state-categories">
<a href=/en/categories/>
<span class=site-state-item-count>25</span>
<span class=site-state-item-name>Categories</span>
</a>
</div>
<div class="site-state-item site-state-tags">
<a href=/en/tags/>
<span class=site-state-item-count>59</span>
<span class=site-state-item-name>Tags</span>
</a>
</div>
</nav>
<div class="links-of-author motion-element">
<span class=links-of-author-item>
<a href=https://github.com/elkan1788/ target=_blank title=GitHub>
<i class="fa fa-fw fa-github"></i>
GitHub
</a>
</span>
<span class=links-of-author-item>
<a href=https://www.zhihu.com/people/fan-meng-xing-chen-1 target=_blank title=ZhiHu>
<i class="fa fa-fw fa-globe"></i>
ZhiHu
</a>
</span>
</div>
<div class="links-of-blogroll motion-element links-of-blogroll-inline">
<div class=links-of-blogroll-title>
<i class="fa fa-fw fa-globe"></i>
Links
</div>
<ul class=links-of-blogroll-list>
<li class=links-of-blogroll-item>
<a href=https://nutzam.com/ title=Nutz target=_blank>Nutz</a>
</li>
<li class=links-of-blogroll-item>
<a href=https://jfinal.com/ title=JFinal target=_blank>JFinal</a>
</li>
<li class=links-of-blogroll-item>
<a href=http://wendal.net/ title=Wendal target=_blank>Wendal</a>
</li>
<li class=links-of-blogroll-item>
<a href=https://www.liaoxuefeng.com/ title=LiaoXueFeng target=_blank>LiaoXueFeng</a>
</li>
<li class=links-of-blogroll-item>
<a href=https://qybit.gitee.io/ title="Qybit's Blog" target=_blank>Qybit's Blog</a>
</li>
</ul>
</div>
<div class="tagcloud-of-blogroll motion-element tagcloud-of-blogroll-inline">
<div class=tagcloud-of-blogroll-title>
<i class="fa fa-fw fa-tags"></i>
TagCloud
</div>
<ul class=tagcloud-of-blogroll-list>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/big-data>Big data</a>
</li>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/linux>Linux</a>
</li>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/blog>Blog</a>
</li>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/git>Git</a>
</li>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/github>Github</a>
</li>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/java>Java</a>
</li>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/kindeditor>Kindeditor</a>
</li>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/python>Python</a>
</li>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/axure>Axure</a>
</li>
<li class=tagcloud-of-blogroll-item>
<a href=/en/tags/front>Front</a>
</li>
</ul>
</div>
<div class="links-of-blogroll motion-element inline">
<script type=text/javascript src="//rf.revolvermaps.com/0/0/6.js?i=5s83wolvn69&m=7&c=e63100&cr1=ffffff&f=arial&l=0&bv=90&lx=-420&ly=420&hi=20&he=7&hc=a8ddff&rs=80" async></script>
</div>
</section>
</div>
</aside>
</div>
</main>
<footer id=footer class=footer>
<div class=footer-inner>
<div class=copyright>
<span class=copyright-year>
&copy; 2010 - 2021
</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=copyright-author>Loving life and dreams.</span>
</div>
<div class=powered-info>
<span class=powered-by>
Powered by - <a class=powered-link href=//gohugo.io target=_blank title=hugo>Hugo v0.87.0</a>
</span>
<span class=separator-line>/</span>
<span class=theme-info>
Theme by - <a class=powered-link href=//github.com/elkan1788/hugo-theme-next target=_blank> NexT
</a>
</span>
</div>
<div class=vistor-info>
<span class=cnzz_icon id=cnzz_stat_icon_1279205305>
<a href="//www.cnzz.com/stat/website.php?web_id=1279205305" target=_blank title=站长统计>
<img border=0 hspace=0 vspace=0 src=//icon.cnzz.com/img/pic1.gif>
</a>
</span>
<script type=text/javascript>(function(){var a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,a.charset='utf-8',a.src='https://s4.cnzz.com/z_stat.php?id=1279205305&show=pic1',b=document.getElementsByTagName('script')[0],b.parentNode.insertBefore(a,b)})()</script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<span class=site-uv>
<i class="fa fa-user"></i>
<span class=busuanzi-value id=busuanzi_value_site_uv></span>
</span>
<span class=separator-line>/</span>
<span class=site-pv>
<i class="fa fa-eye"></i>
<span class=busuanzi-value id=busuanzi_value_site_pv></span>
</span>
</div>
<div class=license-info>
<span class=storage-info>
Storage by
<a href=https://www.qiniu.com style=font-weight:700 target=_blank>Qiniu Cloud</a>
</span>
<span class=separator-line>/</span>
<span class=license-num>
<a href=http://beian.miit.gov.cn target=_blank>ICP.No 18047355</a>
</span>
</div>
</div>
</footer>
<div class=back-to-top>
<i class="fa fa-arrow-up"></i>
<span id=scrollpercent><span>0</span>%</span>
</div>
</div>
<script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.min.js></script>
<script src=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.js></script>
<script type=text/javascript src=/js/search.js></script>
<script type=text/javascript src=/js/affix.js></script>
<script type=text/javascript src=/js/scrollspy.js></script>
<script type=text/javascript>function getCntViewHeight(){var b=$('#content').height(),a=$(window).height(),c=b>a?b-a:$(document).height()-a;return c}function getScrollbarWidth(){var a=$('<div />').addClass('scrollbar-measure').prependTo('body'),b=a[0],c=b.offsetWidth-b.clientWidth;return a.remove(),c}function registerBackTop(){var b=50,a=$('.back-to-top');$(window).on('scroll',function(){var d,e,f,c,g;a.toggleClass('back-to-top-on',window.pageYOffset>b),d=$(window).scrollTop(),e=getCntViewHeight(),f=d/e,c=Math.round(f*100),g=c>100?100:c,$('#scrollpercent>span').html(g)}),a.on('click',function(){$("html,body").animate({scrollTop:0,screenLeft:0},800)})}function initScrollSpy(){var a='.post-toc',d=$(a),b='.active-current';d.on('activate.bs.scrollspy',function(){var b=$(a+' .active').last();c(),b.addClass('active-current')}).on('clear.bs.scrollspy',c),$('body').scrollspy({target:a});function c(){$(a+' '+b).removeClass(b.substring(1))}}function initAffix(){var a=$('.header-inner').height(),b=parseInt($('.main').css('padding-bottom'),10),c=a+10;$('.sidebar-inner').affix({offset:{top:c,bottom:b}}),$(document).on('affixed.bs.affix',function(){updateTOCHeight(document.body.clientHeight-100)})}function initTOCDimension(){var a,b;$(window).on('resize',function(){a&&clearTimeout(a),a=setTimeout(function(){var a=document.body.clientHeight-100;updateTOCHeight(a)},0)}),updateTOCHeight(document.body.clientHeight-100),b=getScrollbarWidth(),$('.post-toc').css('width','calc(100% + '+b+'px)')}function updateTOCHeight(a){a=a||'auto',$('.post-toc').css('max-height',a)}$(function(){var b=$('.header-inner').height()+10,c,d,a,e;$('#sidebar').css({'margin-top':b}).show(),c=$('.header-inner').height(),d=$('.sidebar-inner').height(),a=c+d+50,e=$('.content-wrap').height(),e<a&&$('.content-wrap').css('height',a+50),$('.site-nav-toggle').on('click',function(){var a=$('.site-nav'),e=$('.toggle'),b='site-nav-on',f='toggle-close',c=a.hasClass(b),g=c?'slideUp':'slideDown',d=c?'removeClass':'addClass';a.stop()[g]('normal',function(){a[d](b),e[d](f)})}),registerBackTop(),initScrollSpy(),initAffix(),initTOCDimension(),$('.post-body').viewer(),$('.sidebar-nav-toc').click(function(){$(this).addClass('sidebar-nav-active'),$(this).next().removeClass('sidebar-nav-active'),$('.'+$(this).next().attr('data-target')).toggle(500),$('.'+$(this).attr('data-target')).toggle(500)}),$('.sidebar-nav-overview').click(function(){$(this).addClass('sidebar-nav-active'),$(this).prev().removeClass('sidebar-nav-active'),$('.'+$(this).prev().attr('data-target')).toggle(500),$('.'+$(this).attr('data-target')).toggle(500)})})</script>
<script src=//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js></script>
<script type=text/javascript>new Waline({el:'#wcomments',visitor:!0,placeholder:' Just do what you want leave here. ^_^ ',requiredFields:['nick','mail'],serverURL:"https://waline.lisenhui.cn",lang:"en"})</script>
<script>(function(){var a=document.createElement('script'),c=window.location.protocol.split(':')[0],b;c==='https'?a.src='https://zz.bdstatic.com/linksubmit/push.js':a.src='http://push.zhanzhang.baidu.com/push.js',b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script>
<script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-6049e46e9ee22127"></script>
<script>(function(a,e,f,g,b,c,d){a.DaoVoiceObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,c.charset="utf-8",d.parentNode.insertBefore(c,d)})(window,document,"script",('https:'==document.location.protocol?'https:':'http:')+"//widget.daovoice.io/widget/f89653b8.js","daovoice")</script>
<script type=text/javascript>$(function(){document.body.clientWidth>800&&(daovoice('init',{app_id:"f89653b8"}),daovoice('update'))})</script>
</body>
</html>
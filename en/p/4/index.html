<!doctype html><html lang=en dir=content/en><head><meta name=generator content="Hugo 0.80.0"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=content-security-policy content="upgrade-insecure-requests"><title>Loving life and dreams.</title><meta name=keywords content="Blog,Software,Big Data,Product,Architecture,Java,Kylin"><meta name=author content="Elkan.Li"><meta property="og:title" content="Home"><meta property="og:site_name" content="Loving life and dreams."><meta property="og:image" content="/img/author.jpg"><meta name=title content="Home - Loving life and dreams."><meta name=description content="Weclome to Elkan's blog site that who is best on program develop, pre-sales and big data."><link rel="shortcut icon" href=/img/favicon.ico><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><link href=//cdn.bootcdn.net/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css rel=stylesheet type=text/css><link href=/css/main.css rel=stylesheet type=text/css><link href=/css/syntax.css rel=stylesheet type=text/css><script type=text/javascript>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?9b021cbfb58b35e79012f9690de1c6ab";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-61491374-4"></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-61491374-4 ');</script></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-hans><div class="container one-collumn sidebar-position-left page-home"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle role=button style=opacity:1;top:0><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><div class=multi-lang-switch><i class="fa fa-fw fa-language" style=margin-right:5px></i><a class=lang-link id=zh-cn href=https://lisenhui.cn/>中文</a>
<span class=lang-line>/</span>
<a class=lang-link id=en href=#>English</a></div><div class=custom-logo-site-title><a href=/en/ class=brand rel=start><span class=logo-line-before><i></i></span><span class=site-title>Loving life and dreams.</span>
<span class=logo-line-after><i></i></span></a></div><p class=site-subtitle>Don't stop running forward!</p></div><div class=site-nav-right><div class="toggle popup-trigger" style=opacity:1;top:0><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul id=menu class=menu><li class="menu-item menu-item-active"><a href=/en/ rel=section><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class=menu-item><a href=/en/post rel=section><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archive</a></li><li class=menu-item><a href=/en/about.html rel=section><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li><li class=menu-item><a href=/en/404.html rel=section target=_blank><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>Page404</a></li><li class="menu-item menu-item-search"><a href=javascript:; class=popup-trigger><i class="menu-item-icon fa fa-search fa-fw"></i><br>Search</a></li></ul><div class=site-search><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class=search-icon><i class="fa fa-search"></i></span><span class=popup-btn-close><i class="fa fa-times-circle"></i></span><div class=local-search-input-wrapper><input autocomplete=off placeholder="Enter key words..." spellcheck=false type=text id=local-search-input autocapitalize=none autocorrect=off></div></div><div id=local-search-result></div></div></div></nav></div></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><section id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://lisenhui.cn/en/2017/10/22/ninfi-cluster-deploy-with-kerberos.html itemprop=url>Apache Nifi clustering and user authentication with kerberos</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>Published at:</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2017-10-22">2017-10-22</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>Categories:</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/en/categories/big-data itemprop=url rel=index style=text-decoration:underline><span itemprop=name>Big data</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>Words:</span>
<span class=leancloud-world-count>1371 words</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>Reading:</span>
<span class=leancloud-view-count>7 minutes</span></span></div></header><div class=post-body itemprop=articleBody><p>Recently, some of the lessons learned from the installation configuration are being shared with the help of the .Apache NIFI for contact with data streaming processing. This article is primarily about clusters and user rights, and the description of the &ldquo;Apache NIFI&rdquo; (<a href=https://nifi.apache.org/>https://nifi.apache.org/</a>) is not much of a description, with a direct reference to the official home page as follows:</p><p><img src=http://myblog.lisenhui.cn/2017/10-22-Apache-NiFi-01.png-alias alt=NiFi-01.png></p></div><div class="post-more-link text-center"><a class=btn href=https://lisenhui.cn/en/2017/10/22/ninfi-cluster-deploy-with-kerberos.html rel=contents>Read More &#187;</a></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://lisenhui.cn/en/2017/10/18/ambari-monitor-status-issues.html itemprop=url>An issue with the service in Ambari that is functioning properly but the service stops</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>Published at:</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2017-10-18">2017-10-18</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>Categories:</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/en/categories/big-data itemprop=url rel=index style=text-decoration:underline><span itemprop=name>Big data</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>Words:</span>
<span class=leancloud-world-count>229 words</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>Reading:</span>
<span class=leancloud-view-count>2 minutes</span></span></div></header><div class=post-body itemprop=articleBody><p>Many times the maintenance of the environment is indeed a headache event, which does not originally show the monitoring of normal services on Ambari&rsquo;s Dashboard page, there is a strange phenomenon: in the machine query service running process is normal, but partial Ambari&rsquo;s UI interface is displayed as a stop, but the port check shows normal. Here&rsquo;s the picture:</p><p><img src=http://myblog.lisenhui.cn/2017/10-18-ambari-red.png-alias alt=alert_stopped.png></p></div><div class="post-more-link text-center"><a class=btn href=https://lisenhui.cn/en/2017/10/18/ambari-monitor-status-issues.html rel=contents>Read More &#187;</a></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://lisenhui.cn/en/2017/10/17/hive2-jdbc-connector-issues.html itemprop=url>Problems with HiveServer2 due to the JDBC version</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>Published at:</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2017-10-17">2017-10-17</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>Categories:</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/en/categories/big-data itemprop=url rel=index style=text-decoration:underline><span itemprop=name>Big data</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>Words:</span>
<span class=leancloud-world-count>583 words</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>Reading:</span>
<span class=leancloud-view-count>3 minutes</span></span></div></header><div class=post-body itemprop=articleBody><p>Previously, &lsquo;HDP&rsquo; was used to build and manage the &lsquo;Hadoop&rsquo; environment, and there were no difficult problems when the installation was debugged, but this time it was a strange problem when it was deployed on the &lsquo;Centos6x&rsquo; system:</p><p>On the face of it, the Hive service is functioning normally, the process is running normally, the page UI is normal, and the logs are not output incorrectly. Simple table-building statements can be executed, which can be caused by throwing exceptions when importing local/HDFSdata. The wrong stack information is as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;OPTION SQL_SELECT_LIMIT=DEFAULT&#39; at line 1 
</code></pre></div><p>Another problem is that the HDFS data import prompt file does not exist using the&rsquo;HiveView&rsquo;UI provided by Ambari,with the error message as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: SemanticException Line 1:17 Invalid path &#39;&#39;/tmp/xxx/xxxxx.csv&#39;&#39;: No files matching path hdfs:/...
</code></pre></div></div><div class="post-more-link text-center"><a class=btn href=https://lisenhui.cn/en/2017/10/17/hive2-jdbc-connector-issues.html rel=contents>Read More &#187;</a></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://lisenhui.cn/en/2017/09/09/azkaban-execute-jobs.html itemprop=url>The job types and examples supported by Azkaban</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>Published at:</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2017-09-09">2017-09-09</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>Categories:</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/en/categories/big-data itemprop=url rel=index style=text-decoration:underline><span itemprop=name>Big data</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>Words:</span>
<span class=leancloud-world-count>532 words</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>Reading:</span>
<span class=leancloud-view-count>3 minutes</span></span></div></header><div class=post-body itemprop=articleBody><p>In the introduction to the official documentation, it is understood that &lsquo;Azkaban&rsquo; supportsa wide range of types of work, such as: &lsquo;Command&rsquo;,&lsquo;HadoopShell&rsquo;,&lsquo;Python&rsquo;, &lsquo;Java&rsquo;, &lsquo;Hive&rsquo;, &lsquo;Pig&rsquo; and so on. However, here we mainly only to explain the &lsquo;Python&rsquo; and &lsquo;Java&rsquo;job type tasks, other types of work, such as&rsquo;Commnad&rsquo;,&lsquo;Hive&rsquo;,&lsquo;HadoopShell&rsquo;relatively simple without explanation, if necessary, you can practice ityourself.</p><p>Regardless of which task is submitted, &lsquo;Azkaban&rsquo; is managed by uploading a compressed package by default, so it is recommended that you get into the habit ofnot packing the executed files (code) into the &lsquo;Azkaban&rsquo; engineering package. The benefits are obvious, such as:</p><ul><li><p>The project is created so fast that you don&rsquo;t need to pass on some files to execute</p></li><li><p>Avoid modifying the &lsquo;I&rsquo;m max_allow_packet&rsquo;parameterin &lsquo;MySQL&rsquo;to resolve the issue of failed transmissions on engineering files</p></li><li><p>In a distributed environment, when performing Task eliminates the hassle of copying engineering packages in different nodes</p></li></ul></div><div class="post-more-link text-center"><a class=btn href=https://lisenhui.cn/en/2017/09/09/azkaban-execute-jobs.html rel=contents>Read More &#187;</a></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://lisenhui.cn/en/2017/09/08/azkaban-install-use-share.html itemprop=url>Timed scheduling tasker Azkaban installation</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>Published at:</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2017-09-08">2017-09-08</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>Categories:</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/en/categories/big-data itemprop=url rel=index style=text-decoration:underline><span itemprop=name>Big data</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>Words:</span>
<span class=leancloud-world-count>1342 words</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>Reading:</span>
<span class=leancloud-view-count>7 minutes</span></span></div></header><div class=post-body itemprop=articleBody><p>Background and introduction</p><p>In the big data complex ETL or other data processing processes, some tasks need to be performed on a timed basis, although Linux brings itsown&rsquo;cron' commandfunction, but still can not meet the biggest point is that it does notprovide centralized management and visual editing. In fact, in the big data ecology has been integrated with a timed scheduling framework &lsquo;Oozie&rsquo;, but the practice found that its learning costs are not low, the process of distribution is more complex. After trying other distribution worker scheduling frameworks, such as Ali&rsquo;s Zeus &lsquo;Zeus&rsquo;, or &lsquo;Azkaban&rsquo;, which is used by more people in the community.</p><p>&lsquo;Azkaban3&rsquo; is still relatively large compared to the changes made in the previous version, and interested parties can be found on its official website, <a href=https://azkaban.github.io/azkaban/docs/latest/>Azkaban</a>. Next, mainly to share the installation of &lsquo;Azkaban 3&rsquo;, the following is &lsquo;Azkaban 3&rsquo; system architecture design:</p><p><img src=http://myblog.lisenhui.cn/2017/09-08-Azkaban-Install00.png-alias alt=Azkaban-Install00></p><p>The three components in the figure are an important part of &lsquo;Azkaban3&rsquo;:</p><ul><li>MySQL relationship data storage data</li><li>Web Server GUI management service provider</li><li>Executor Server Distributed Node Service</li></ul></div><div class="post-more-link text-center"><a class=btn href=https://lisenhui.cn/en/2017/09/08/azkaban-install-use-share.html rel=contents>Read More &#187;</a></div><footer class=post-footer><div class=post-eof></div></footer></article></section><nav class=pagination><a class="extend prev" rel=prev href=/en/p/3/><i class="fa fa-angle-left"></i></a><a class=page-number href=/en/>1</a>
<a class=page-number href=/en/p/2/>2</a>
<a class=page-number href=/en/p/3/>3</a>
<span class="page-number current">4</span>
<a class=page-number href=/en/p/5/>5</a>
<a class=page-number href=/en/p/6/>6</a>
<a class=page-number href=/en/p/7/>7</a>
<a class=page-number href=/en/p/8/>8</a>
<a class="extend next" rel=next href=/en/p/5/><i class="fa fa-angle-right"></i></a></nav></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><section class="site-overview sidebar-panel sidebar-panel-active"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src=/img/avatar.png alt=Elkan.Li><p class=site-author-name itemprop=name>Elkan.Li</p><p class="site-description motion-element" itemprop=description>Never forget your dreams！</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/en/post/><span class=site-state-item-count>51</span>
<span class=site-state-item-name>Blogs</span></a></div><div class="site-state-item site-state-categories"><a href=/en/categories/><span class=site-state-item-count>25</span>
<span class=site-state-item-name>Categories</span></a></div><div class="site-state-item site-state-tags"><a href=/en/tags/><span class=site-state-item-count>59</span>
<span class=site-state-item-name>Tags</span></a></div></nav><div class="feed-link motion-element"><a href=/en/index.xml rel=alternate type=application/rss+xml target=_blank><i class="fa fa-rss"></i>RSS</a></div><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/elkan1788/ target=_blank title=GitHub><i class="fa fa-fw fa-github"></i>GitHub</a></span>
<span class=links-of-author-item><a href=https://www.zhihu.com/people/fan-meng-xing-chen-1 target=_blank title=ZhiHu><i class="fa fa-fw fa-globe"></i>ZhiHu</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class=links-of-blogroll-title><i class="fa fa-fw fa-globe"></i>Links</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://nutzam.com/ title=Nutz target=_blank>Nutz</a></li><li class=links-of-blogroll-item><a href=https://jfinal.com/ title=JFinal target=_blank>JFinal</a></li><li class=links-of-blogroll-item><a href=http://wendal.net/ title=Wendal target=_blank>Wendal</a></li><li class=links-of-blogroll-item><a href=https://www.liaoxuefeng.com/ title=LiaoXueFeng target=_blank>LiaoXueFeng</a></li><li class=links-of-blogroll-item><a href=https://qybit.gitee.io/ title="Qybit's Blog" target=_blank>Qybit's Blog</a></li></ul></div><div class="tagcloud-of-blogroll motion-element tagcloud-of-blogroll-inline"><div class=tagcloud-of-blogroll-title><i class="fa fa-fw fa-tags"></i>TagCloud</div><ul class=tagcloud-of-blogroll-list><li class=tagcloud-of-blogroll-item><a href=/en/tags/big-data>Big data</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/linux>Linux</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/blog>Blog</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/git>Git</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/github>Github</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/java>Java</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/kindeditor>Kindeditor</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/python>Python</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/axure>Axure</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/front>Front</a></li></ul></div><div class="links-of-blogroll motion-element inline"><script type=text/javascript src="//rf.revolvermaps.com/0/0/6.js?i=5s83wolvn69&m=7&c=e63100&cr1=ffffff&f=arial&l=0&bv=90&lx=-420&ly=420&hi=20&he=7&hc=a8ddff&rs=80" async></script></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright><span class=copyright-year>&copy; 2010 - 2021</span>
<span class=with-love><i class="fa fa-heart"></i></span><span class=copyright-author>Loving life and dreams.</span></div><div class=powered-info><span class=powered-by>Powered by - <a class=powered-link href=//gohugo.io target=_blank title=hugo>Hugo v0.80.0</a></span>
<span class=separator-line>/</span>
<span class=theme-info>Theme by - <a class=powered-link href=//github.com/elkan1788/hugo-theme-next target=_blank>NexT</a></span></div><div class=vistor-info><span class=cnzz_icon id=cnzz_stat_icon_1279205305><a href="//www.cnzz.com/stat/website.php?web_id=1279205305" target=_blank title=站长统计><img border=0 hspace=0 vspace=0 src=//icon.cnzz.com/img/pic1.gif></a></span>
<script type=text/javascript>(function(){var cnzz_s_tag=document.createElement('script');cnzz_s_tag.type='text/javascript';cnzz_s_tag.async=true;cnzz_s_tag.charset='utf-8';cnzz_s_tag.src='https://s4.cnzz.com/z_stat.php?id=1279205305&show=pic1';var root_s=document.getElementsByTagName('script')[0];root_s.parentNode.insertBefore(cnzz_s_tag,root_s);})();</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span class=site-uv><i class="fa fa-user"></i><span class=busuanzi-value id=busuanzi_value_site_uv></span></span><span class=separator-line>/</span>
<span class=site-pv><i class="fa fa-eye"></i><span class=busuanzi-value id=busuanzi_value_site_pv></span></span></div><div class=license-info><span class=storage-info>Storage by
<a href=https://www.qiniu.com style=font-weight:700 target=_blank>Qiniu Cloud</a></span>
<span class=separator-line>/</span>
<span class=license-num><a href=http://beian.miit.gov.cn target=_blank>ICP.No 18047355</a></span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i><span id=scrollpercent><span>0</span>%</span></div></div><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.min.js></script><script type=text/javascript src=/js/search.js></script><script type=text/javascript src=/js/affix.js></script><script type=text/javascript src=/js/scrollspy.js></script><script type=text/javascript>function getCntViewHeight(){var docHeight=$('#content').height(),winHeight=$(window).height(),cntViewHeight=(docHeight>winHeight)?(docHeight-winHeight):($(document).height()-winHeight);return cntViewHeight;}
function getScrollbarWidth(){var $div=$('<div />').addClass('scrollbar-measure').prependTo('body');var div=$div[0];var scrollbarWidth=div.offsetWidth-div.clientWidth;$div.remove();return scrollbarWidth;}
function registerBackTop(){var THRESHOLD=50;var $top=$('.back-to-top');$(window).on('scroll',function(){$top.toggleClass('back-to-top-on',window.pageYOffset>THRESHOLD);var scrollTop=$(window).scrollTop();var cntViewHeight=getCntViewHeight();var scrollPercent=(scrollTop)/(cntViewHeight);var scrollPercentRounded=Math.round(scrollPercent*100);var scrollPercentMaxed=(scrollPercentRounded>100)?100:scrollPercentRounded;$('#scrollpercent>span').html(scrollPercentMaxed);});$top.on('click',function(){$("html,body").animate({scrollTop:0,screenLeft:0,},800);});}
function initScrollSpy(){var tocSelector='.post-toc';var $tocElement=$(tocSelector);var activeCurrentSelector='.active-current';$tocElement.on('activate.bs.scrollspy',function(){var $currentActiveElement=$(tocSelector+' .active').last();removeCurrentActiveClass();$currentActiveElement.addClass('active-current');}).on('clear.bs.scrollspy',removeCurrentActiveClass);$('body').scrollspy({target:tocSelector});function removeCurrentActiveClass(){$(tocSelector+' '+activeCurrentSelector).removeClass(activeCurrentSelector.substring(1));}}
function initAffix(){var headerHeight=$('.header-inner').height();var footerOffset=parseInt($('.main').css('padding-bottom'),10);var sidebarTop=headerHeight+10;$('.sidebar-inner').affix({offset:{top:sidebarTop,bottom:footerOffset}});$(document).on('affixed.bs.affix',function(){updateTOCHeight(document.body.clientHeight-100);});}
function initTOCDimension(){var updateTOCHeightTimer;$(window).on('resize',function(){updateTOCHeightTimer&&clearTimeout(updateTOCHeightTimer);updateTOCHeightTimer=setTimeout(function(){var tocWrapperHeight=document.body.clientHeight-100;updateTOCHeight(tocWrapperHeight);},0);});updateTOCHeight(document.body.clientHeight-100);var scrollbarWidth=getScrollbarWidth();$('.post-toc').css('width','calc(100% + '+scrollbarWidth+'px)');}
function updateTOCHeight(height){height=height||'auto';$('.post-toc').css('max-height',height);}
$(function(){var sidebarTop=$('.header-inner').height()+10;$('#sidebar').css({'margin-top':sidebarTop}).show();var headerHeight=$('.header-inner').height();var sidebarHeight=$('.sidebar-inner').height();var leftHeight=headerHeight+sidebarHeight+50;var contentHeight=$('.content-wrap').height();if(contentHeight<leftHeight){$('.content-wrap').css('height',leftHeight+50);}
$('.site-nav-toggle').on('click',function(){var $siteNav=$('.site-nav');var $toggleLine=$('.toggle');var ON_CLASS_NAME='site-nav-on';var CLOSE_CLASS_NAME='toggle-close';var isSiteNavOn=$siteNav.hasClass(ON_CLASS_NAME);var animateAction=isSiteNavOn?'slideUp':'slideDown';var animateCallback=isSiteNavOn?'removeClass':'addClass';$siteNav.stop()[animateAction]('normal',function(){$siteNav[animateCallback](ON_CLASS_NAME);$toggleLine[animateCallback](CLOSE_CLASS_NAME);});});registerBackTop();initScrollSpy();initAffix();initTOCDimension();$('.sidebar-nav-toc').click(function(){$(this).addClass('sidebar-nav-active');$(this).next().removeClass('sidebar-nav-active');$('.'+$(this).next().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});$('.sidebar-nav-overview').click(function(){$(this).addClass('sidebar-nav-active');$(this).prev().removeClass('sidebar-nav-active');$('.'+$(this).prev().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});});</script><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:'==document.location.protocol?'https:':'http:')+"//widget.daovoice.io/widget/f89653b8.js","daovoice")</script><script type=text/javascript>$(function(){if(document.body.clientWidth>800){daovoice('init',{app_id:"f89653b8"});daovoice('update');}});</script></body></html>
<!doctype html><html lang=en dir=content/en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=content-security-policy content="upgrade-insecure-requests"><title>mpsdk4j's bit-by-bit record- MPAccount - Loving life and dreams.</title><meta name=keywords content="Blog | Software | Architecture | Java | Kylin"><meta name=author content="Elkan.Li"><meta property="og:title" content="mpsdk4j's bit-by-bit record- MPAccount"><meta property="og:site_name" content="Loving life and dreams."><meta property="og:image" content="/img/author.jpg"><meta name=title content="mpsdk4j's bit-by-bit record- MPAccount - Loving life and dreams."><meta name=description content="Blog | Software | Architecture | Java | Kylin"><link rel="shortcut icon" href=/img/favicon.ico><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><link href=//cdn.bootcdn.net/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css rel=stylesheet type=text/css><link href=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.css rel=stylesheet><link href=/css/main.css rel=stylesheet type=text/css><link href=/css/syntax.css rel=stylesheet type=text/css><script type=text/javascript>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?9b021cbfb58b35e79012f9690de1c6ab";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-61491374-4"></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-61491374-4 ');</script></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-hans><div class="container one-collumn sidebar-position-left page-home"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-meta><div class=multi-lang-switch><i class="fa fa-fw fa-language" style=margin-right:5px></i><a class=lang-link id=zh-cn href=https://lisenhui.cn/2016/01/23/mpsdk4j-intro-mapaccount.html>中文</a>
<span class=lang-line>/</span>
<a class=lang-link id=en href=#>English</a></div><div class=custom-logo-site-title><a href=/en/ class=brand rel=start><span class=logo-line-before><i></i></span><span class=site-title>Loving life and dreams.</span>
<span class=logo-line-after><i></i></span></a></div><p class=site-subtitle>Don't stop running forward!</p></div><div class=site-nav-toggle><button>
<span class=btn-bar></span><span class=btn-bar></span><span class=btn-bar></span></button></div><nav class=site-nav><ul id=menu class=menu><li class=menu-item><a href=/en/ rel=section><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class=menu-item><a href=/en/post rel=section><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archive</a></li><li class=menu-item><a href=/en/about.html rel=section><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li><li class=menu-item><a href=/en/404.html rel=section target=_blank><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>Page404</a></li><li class="menu-item menu-item-search"><a href=javascript:; class=popup-trigger><i class="menu-item-icon fa fa-search fa-fw"></i><br>Search</a></li></ul><div class=site-search><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class=search-icon><i class="fa fa-search"></i></span><span class=popup-btn-close><i class="fa fa-times-circle"></i></span><div class=local-search-input-wrapper><input autocomplete=off placeholder="Enter key words..." spellcheck=false type=text id=local-search-input autocapitalize=none autocorrect=off></div></div><div id=local-search-result></div></div></div></nav></div></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><section id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://lisenhui.cn/en/2016/01/23/mpsdk4j-intro-mapaccount.html itemprop=url>mpsdk4j's bit-by-bit record- MPAccount</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>Published at:</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2016-01-23">2016-01-23</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>Categories:</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/en/categories/mpsdk4j itemprop=url rel=index style=text-decoration:underline><span itemprop=name>MPSDK4J</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>Words:</span>
<span class=leancloud-world-count>671 words</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>Reading:</span>
<span class=leancloud-view-count>4 minutes</span></span>
<span id=/en/2016/01/23/mpsdk4j-intro-mapaccount.html class=leancloud_visitors data-flag-title="mpsdk4j's bit-by-bit record- MPAccount">|
<i class="fa fa-binoculars fa-fw"></i><span class=post-meta-item-text>Visited:</span>
<span class=leancloud-visitors-count></span></span></div></header><div class=post-body itemprop=articleBody><p>&lsquo;mpsdk4j&rsquo; is an open source sharing project that has been pulled out of the actual production project, and its growth has been a lot of experience so far, recently has been busy with work and life things neglected to care about it. Since last year&rsquo;s determination to refactor it and establish a QQ communication group (<a href="http://jq.qq.com/?_wv=1027&k=dPDLxk">486192816</a>), Gradually there are not industry friends come to pay attention to, in this thank you very much for their support. All said that the use of the party know its good, but the actual situation is not so optimistic ah, in the process of everyone&rsquo;s use found that &lsquo;mpsdk4j&rsquo; there are many deficiencies and deficiencies. Before the New Year&rsquo;s Day release of the 2.b.1 version has not yet been delayed, in this to say sorry, will be congratulated. Below is also advanced into this theme - first understanding of &lsquo;mpsdk4j'&lsquo;MPAccount&rsquo;. (Note: For 1 WeChat development Basics and project experience can be skimed).</p><p>The goal of &lsquo;mpsdk4j&rsquo; since its release is to be original and easy to use. However, in the actual exchange process found a common phenomenon, that is, for the first contact with WeChat development friends, the use of &lsquo;mpsdk4j&rsquo; is still a bit difficult (that is why we write this blog post). Then we first simply understand the WeChat public platform opened the required elements, and their mapping relationship with &lsquo;mpsdk4j&rsquo;</p><h2 id=wechat-public-number-property>WeChat Public Number property</h2><table><thead><tr><th>The serial number</th><th>The property</th><th>Example</th><th>Note</th></tr></thead><tbody><tr><td>1</td><td>The original ID of the public</td><td>gh_20e50b3b4r9u</td><td>The one that beginswith a gh s(don&rsquo;t understand what it means)</td></tr><tr><td>2</td><td>The public nickname is</td><td>mpsdk4j</td><td>The user-defined public number alias</td></tr><tr><td>3</td><td>The user&rsquo;s unique credentials (app ID)</td><td>wxa822bd879532187</td><td>Starting with the letter wx, the meaning is probably WeChat&rsquo;s Pinyin initials</td></tr><tr><td>4</td><td>The user&rsquo;s unique credential key (app key)</td><td>613d3ce897hgf71a875d1342c8325f3d</td><td>The 32-bit random string</td></tr><tr><td>5</td><td>AES plus decryption key</td><td>JwAsfZH4p9iuuvfxjry6cLtlOgZAd853kJQ5hNv5OI4</td><td>A 43-bit random string</td></tr><tr><td>6</td><td>Developer service tokens</td><td>weixindev</td><td>Custom tokens and devices when a user receives a WeChat developer</td></tr><tr><td>7</td><td>The public number type</td><td>S</td><td>D: Subscription number, S: service number, E: Enterprise number (reserved field)</td></tr><tr><td>8</td><td>Whether to certify</td><td>true</td><td>true: Certified, false: Failed certification (i.e. also reserved field)</td></tr></tbody></table><h2 id=code-mapping-relationships-in-mpsdk4j>Code mapping relationships in &lsquo;mpsdk4j&rsquo;</h2><p>So in &lsquo;mpsdk4j&rsquo; I designed an object, located in the &lsquo;io.github.elkan1788.mpsdk4j.vo&rsquo;package whose name is&rsquo;MPAccount&rsquo;,which translates directly tothe weChat public number. It will be above the code corresponding to the &ldquo;8&rdquo; public number attribute as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>
<span style=color:#080;font-style:italic>/**
</span><span style=color:#080;font-style:italic>:: WeChat Public Number Information
</span><span style=color:#080;font-style:italic> * 
</span><span style=color:#080;font-style:italic>:: @author Dream Stardust (elkan1788@gmail.com).
</span><span style=color:#080;font-style:italic> * @since 2.0
</span><span style=color:#080;font-style:italic> */</span>
<span style=color:#a2f;font-weight:700>public</span> <span style=color:#a2f;font-weight:700>class</span> <span style=color:#00f>MPAccount</span> <span style=color:#666>{</span>

    <span style=color:#080;font-style:italic>/**
</span><span style=color:#080;font-style:italic>     The original ID of the public number
</span><span style=color:#080;font-style:italic>     */</span>
    <span style=color:#a2f;font-weight:700>private</span> String mpId<span style=color:#666>;</span>

    <span style=color:#080;font-style:italic>/**
</span><span style=color:#080;font-style:italic>     :: Public nickname
</span><span style=color:#080;font-style:italic>     */</span>
    <span style=color:#a2f;font-weight:700>private</span> String nickName<span style=color:#666>;</span>

    <span style=color:#080;font-style:italic>/**
</span><span style=color:#080;font-style:italic>     :: App Id
</span><span style=color:#080;font-style:italic>     */</span>
    <span style=color:#a2f;font-weight:700>private</span> String appId<span style=color:#666>;</span>

    <span style=color:#080;font-style:italic>/**
</span><span style=color:#080;font-style:italic>     :: Apply the key
</span><span style=color:#080;font-style:italic>     */</span>
    <span style=color:#a2f;font-weight:700>private</span> String appSecret<span style=color:#666>;</span>

    <span style=color:#080;font-style:italic>/**
</span><span style=color:#080;font-style:italic>     :: Token
</span><span style=color:#080;font-style:italic>     */</span>
    <span style=color:#a2f;font-weight:700>private</span> String token<span style=color:#666>;</span>

    <span style=color:#080;font-style:italic>/**
</span><span style=color:#080;font-style:italic>     AES secure encryption key
</span><span style=color:#080;font-style:italic>     */</span>
    <span style=color:#a2f;font-weight:700>private</span> String AESKey<span style=color:#666>;</span>

    <span style=color:#080;font-style:italic>/**
</span><span style=color:#080;font-style:italic>     Public number type
</span><span style=color:#080;font-style:italic>     :: D: Subscription number
</span><span style=color:#080;font-style:italic>     :: E: Enterprise No
</span><span style=color:#080;font-style:italic>     :: S: Service number
</span><span style=color:#080;font-style:italic>     */</span>
    <span style=color:#a2f;font-weight:700>private</span> String mpType<span style=color:#666>;</span>

    <span style=color:#080;font-style:italic>/**
</span><span style=color:#080;font-style:italic>     Whether it is certified or not
</span><span style=color:#080;font-style:italic>     */</span>
    <span style=color:#a2f;font-weight:700>private</span> <span style=color:#0b0;font-weight:700>boolean</span> pass<span style=color:#666>;</span>
    
    <span style=color:#666>......</span>
<span style=color:#666>}</span>

</code></pre></div><p>Friends with weChat development experience, it is not difficult to see that these properties are WeChat public number necessary, The previous 6 properties can be weChat public number management platform intuitively see, the back 2 attributes are extracted from the experience, in many of the later development there is a need to use. For example, when calling WeChat&rsquo;s speech recognition interface is to first understand whether the current public number is certified, only certified public number has the right to use speech recognition interface. In the actual project experience, you design this type of database table to manage WeChat public number information .</p><p>Maybe you&rsquo;ll think that reading these articles doesn&rsquo;t pay much, that doesn&rsquo;t matter, you can collect it and use it as a documentation tool. One day when you&rsquo;re developing you don&rsquo;t remember the meaning of one of these properties, you can go back and pick it up. If you have suggestions or comments, you can reply below</p><p>Reference:</p><ul><li>Access Guide (<a href=https://mp.weixin.qq.com/wiki/8/f9a0b8382e0b77d87b3bcc1ce6fbc104.html>https://mp.weixin.qq.com/wiki/8/f9a0b8382e0b77d87b3bcc1ce6fbc104.html</a>)</li><li>(<a href=https://mp.weixin.qq.com/wiki/14/70e73cedf9fd958d2e23264ba9333ad2.html>https://mp.weixin.qq.com/wiki/14/70e73cedf9fd958d2e23264ba9333ad2.html</a>)</li></ul></div><footer class=post-footer><div class=post-tags><a href=/en/tags/mpsdk4j rel=tag title=MPSDK4J>#MPSDK4J#</a>
<a href=/en/tags/wechat rel=tag title=WeChat>#WeChat#</a></div><div class="bshare-custom icon-medium-plus" style=margin-top:50px><a href=# id=bshare-shareto>Share:</a>
<a title=Wechat class=bshare-weixin></a><a title="QQ Zone" class=bshare-qzone></a><a title="Sina Min Blog" class=bshare-sinaminiblog></a><a title="Youdao Note" class=bshare-youdaonote></a><a title="QQ IM" class=bshare-qqim></a><a title=Douban class=bshare-douban></a><a title=Clipboard class=bshare-clipboard></a><a title=More class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type=text/javascript>(function(){var cnzz_s_tag=document.createElement('script');cnzz_s_tag.type='text/javascript';cnzz_s_tag.async=true;cnzz_s_tag.charset='utf-8';cnzz_s_tag.src='https://static.bshare.cn/b/buttonLite.js#style=-1&uuid=Your ShareId&pophcol=1&lang=zh';var root_s=document.getElementsByTagName('script')[0];root_s.parentNode.insertBefore(cnzz_s_tag,root_s);})();(function(){var cnzz_s_tag=document.createElement('script');cnzz_s_tag.type='text/javascript';cnzz_s_tag.async=true;cnzz_s_tag.charset='utf-8';cnzz_s_tag.src='https://static.bshare.cn/b/bshareC0.js';var root_s=document.getElementsByTagName('script')[0];root_s.parentNode.insertBefore(cnzz_s_tag,root_s);})();</script><div class=post-nav><div class=article-copyright><div class=article-copyright-img><img src=/img/qq_qrcode.png width=129px height=129px><div style=text-align:center>QQ QrCode</div></div><div class=article-copyright-info><p><span>Declaration：</span>mpsdk4j's bit-by-bit record- MPAccount</p><p><span>Link：</span>https://lisenhui.cn/en/2016/01/23/mpsdk4j-intro-mapaccount.html</p><p><span>Author：</span>Elkan.Li</p><p><span>Declaration： </span>This blog post article is under the <a href=https://creativecommons.org/licenses/by-nc-sa/3.0/ target=_blank style=text-decoration:underline>CC BY-NC-SA 3.0</a> license,Please indicate the source!</p></div></div><div class=clear></div></div><div class=reward-qr-info><div>If it can help you, you can give tips for blogger that how much you can. ^_^</div><button id=rewardButton disable=enable onclick="var qr=document.getElementById('QR');if(qr.style.display==='none'){qr.style.display='block';}else{qr.style.display='none'}">
<span>Reward</span></button><div id=QR style=display:none><div id=wechat style=display:inline-block><img id=wechat_qr src=/img/wechat-pay.png alt="WeChat Pay"><p>Wechat Pay</p></div><div id=alipay style=display:inline-block><img id=alipay_qr src=/img/ali-pay.png alt=Alipay><p>Ali Pay</p></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=https://lisenhui.cn/en/2016/01/29/git-commands-collect.html rel=next title="Git action command collection"><i class="fa fa-chevron-left"></i>Git action command collection</a></div><div class="post-nav-prev post-nav-item"><a href=https://lisenhui.cn/en/2016/01/19/mapdb-write-read-sync.html rel=prev title="MapDB synchronous  read and write example">MapDB synchronous read and write example
<i class="fa fa-chevron-right"></i></a></div></div><div id=vcomments></div></footer></article></section></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><section class="site-overview sidebar-panel sidebar-panel-active"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src=/img/avatar.png alt=Elkan.Li><p class=site-author-name itemprop=name>Elkan.Li</p><p class="site-description motion-element" itemprop=description>Never forget your dreams！</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/en/post/><span class=site-state-item-count>50</span>
<span class=site-state-item-name>Blogs</span></a></div><div class="site-state-item site-state-categories"><a href=/en/categories/><span class=site-state-item-count>24</span>
<span class=site-state-item-name>Categories</span></a></div><div class="site-state-item site-state-tags"><a href=/en/tags/><span class=site-state-item-count>57</span>
<span class=site-state-item-name>Tags</span></a></div></nav><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/elkan1788/ target=_blank title=GitHub><i class="fa fa-fw fa-github"></i>GitHub</a></span>
<span class=links-of-author-item><a href=https://www.zhihu.com/people/fan-meng-xing-chen-1 target=_blank title=ZhiHu><i class="fa fa-fw fa-globe"></i>ZhiHu</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class=links-of-blogroll-title><i class="fa fa-fw fa-globe"></i>Links</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://nutzam.com/ title=Nutz target=_blank>Nutz</a></li><li class=links-of-blogroll-item><a href=https://jfinal.com/ title=JFinal target=_blank>JFinal</a></li><li class=links-of-blogroll-item><a href=http://wendal.net/ title=Wendal target=_blank>Wendal</a></li><li class=links-of-blogroll-item><a href=https://www.liaoxuefeng.com/ title=LiaoXueFeng target=_blank>LiaoXueFeng</a></li><li class=links-of-blogroll-item><a href=https://qybit.gitee.io/ title="Qybit's Blog" target=_blank>Qybit's Blog</a></li></ul></div><div class="tagcloud-of-blogroll motion-element tagcloud-of-blogroll-inline"><div class=tagcloud-of-blogroll-title><i class="fa fa-fw fa-tags"></i>TagCloud</div><ul class=tagcloud-of-blogroll-list><li class=tagcloud-of-blogroll-item><a href=/en/tags/big-data>Big data</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/linux>Linux</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/blog>Blog</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/git>Git</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/github>Github</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/java>Java</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/kindeditor>Kindeditor</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/python>Python</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/axure>Axure</a></li><li class=tagcloud-of-blogroll-item><a href=/en/tags/front>Front</a></li></ul></div><div class="links-of-blogroll motion-element inline"><script type=text/javascript src="//rf.revolvermaps.com/0/0/6.js?i=5s83wolvn69&m=7&c=e63100&cr1=ffffff&f=arial&l=0&bv=90&lx=-420&ly=420&hi=20&he=7&hc=a8ddff&rs=80" async></script></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright><span class=copyright-year>&copy; 2010 - 2021</span>
<span class=with-love><i class="fa fa-heart"></i></span><span class=copyright-author>Loving life and dreams.</span></div><div class=powered-info><span class=powered-by>Powered by - <a class=powered-link href=//gohugo.io target=_blank title=hugo>Hugo v0.80.0</a></span>
<span class=separator-line>/</span>
<span class=theme-info>Theme by - <a class=powered-link href=//github.com/elkan1788/hugo-theme-next target=_blank>NexT</a></span></div><div class=vistor-info><span class=cnzz_icon id=cnzz_stat_icon_1279205305><a href="//www.cnzz.com/stat/website.php?web_id=1279205305" target=_blank title=站长统计><img border=0 hspace=0 vspace=0 src=//icon.cnzz.com/img/pic1.gif></a></span>
<script type=text/javascript>(function(){var cnzz_s_tag=document.createElement('script');cnzz_s_tag.type='text/javascript';cnzz_s_tag.async=true;cnzz_s_tag.charset='utf-8';cnzz_s_tag.src='https://s4.cnzz.com/z_stat.php?id=1279205305&show=pic1';var root_s=document.getElementsByTagName('script')[0];root_s.parentNode.insertBefore(cnzz_s_tag,root_s);})();</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span class=site-uv><i class="fa fa-user"></i><span class=busuanzi-value id=busuanzi_value_site_uv></span></span><span class=separator-line>/</span>
<span class=site-pv><i class="fa fa-eye"></i><span class=busuanzi-value id=busuanzi_value_site_pv></span></span></div><div class=license-info><span class=storage-info>Storage by
<a href=https://www.qiniu.com style=font-weight:700 target=_blank>Qiniu Cloud</a></span>
<span class=separator-line>/</span>
<span class=license-num><a href=http://beian.miit.gov.cn target=_blank>ICP.No 18047355</a></span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i><span id=scrollpercent><span>0</span>%</span></div></div><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.min.js></script><script src=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.js></script><script type=text/javascript src=/js/search.js></script><script type=text/javascript src=/js/affix.js></script><script type=text/javascript src=/js/scrollspy.js></script><script type=text/javascript>function getCntViewHeight(){var docHeight=$('#content').height(),winHeight=$(window).height(),cntViewHeight=(docHeight>winHeight)?(docHeight-winHeight):($(document).height()-winHeight);return cntViewHeight;}
function getScrollbarWidth(){var $div=$('<div />').addClass('scrollbar-measure').prependTo('body');var div=$div[0];var scrollbarWidth=div.offsetWidth-div.clientWidth;$div.remove();return scrollbarWidth;}
function registerBackTop(){var THRESHOLD=50;var $top=$('.back-to-top');$(window).on('scroll',function(){$top.toggleClass('back-to-top-on',window.pageYOffset>THRESHOLD);var scrollTop=$(window).scrollTop();var cntViewHeight=getCntViewHeight();var scrollPercent=(scrollTop)/(cntViewHeight);var scrollPercentRounded=Math.round(scrollPercent*100);var scrollPercentMaxed=(scrollPercentRounded>100)?100:scrollPercentRounded;$('#scrollpercent>span').html(scrollPercentMaxed);});$top.on('click',function(){$("html,body").animate({scrollTop:0,screenLeft:0,},800);});}
function initScrollSpy(){var tocSelector='.post-toc';var $tocElement=$(tocSelector);var activeCurrentSelector='.active-current';$tocElement.on('activate.bs.scrollspy',function(){var $currentActiveElement=$(tocSelector+' .active').last();removeCurrentActiveClass();$currentActiveElement.addClass('active-current');}).on('clear.bs.scrollspy',removeCurrentActiveClass);$('body').scrollspy({target:tocSelector});function removeCurrentActiveClass(){$(tocSelector+' '+activeCurrentSelector).removeClass(activeCurrentSelector.substring(1));}}
function initAffix(){var headerHeight=$('.header-inner').height();var footerOffset=parseInt($('.main').css('padding-bottom'),10);var sidebarTop=headerHeight+10;$('.sidebar-inner').affix({offset:{top:sidebarTop,bottom:footerOffset}});$(document).on('affixed.bs.affix',function(){updateTOCHeight(document.body.clientHeight-100);});}
function initTOCDimension(){var updateTOCHeightTimer;$(window).on('resize',function(){updateTOCHeightTimer&&clearTimeout(updateTOCHeightTimer);updateTOCHeightTimer=setTimeout(function(){var tocWrapperHeight=document.body.clientHeight-100;updateTOCHeight(tocWrapperHeight);},0);});updateTOCHeight(document.body.clientHeight-100);var scrollbarWidth=getScrollbarWidth();$('.post-toc').css('width','calc(100% + '+scrollbarWidth+'px)');}
function updateTOCHeight(height){height=height||'auto';$('.post-toc').css('max-height',height);}
$(function(){var sidebarTop=$('.header-inner').height()+10;$('#sidebar').css({'margin-top':sidebarTop}).show();var headerHeight=$('.header-inner').height();var sidebarHeight=$('.sidebar-inner').height();var leftHeight=headerHeight+sidebarHeight+50;var contentHeight=$('.content-wrap').height();if(contentHeight<leftHeight){$('.content-wrap').css('height',leftHeight+50);}
registerBackTop();initScrollSpy();initAffix();initTOCDimension();$('.post-body').viewer();$('.sidebar-nav-toc').click(function(){$(this).addClass('sidebar-nav-active');$(this).next().removeClass('sidebar-nav-active');$('.'+$(this).next().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});$('.sidebar-nav-overview').click(function(){$(this).addClass('sidebar-nav-active');$(this).prev().removeClass('sidebar-nav-active');$('.'+$(this).prev().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});if(document.body.clientWidth>800){daovoice('init',{app_id:"f89653b8"});daovoice('update');}});</script><script src=//unpkg.com/valine/dist/Valine.min.js></script><script type=text/javascript>new Valine({el:'#vcomments',appId:'1cO558rHLWLwnMRkRjOf7Y3z-gzGzoHsz',appKey:'8mTM8LX1gsmkGzugate3bpnj',visitor:true,placeholder:' Just do what you want leave here. ^_^ ',requiredFields:['nick','mail'],lang:"en"});</script><script>(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js';}
else{bp.src='http://push.zhanzhang.baidu.com/push.js';}
var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:'==document.location.protocol?'https:':'http:')+"//widget.daovoice.io/widget/f89653b8.js","daovoice")</script></body></html>
<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.139.4"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon-32x32.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple-touch-icon.png><meta itemprop=name content="本地搭建Kylin运行环境实践"><meta itemprop=description content="借助VT-x的虚拟技术和Oracle虚拟机平台，实现在本地电脑上搭建CDH大数据平台的环境，并搭建Kylin服务在其上面进行数据探索。"><meta name=description content="借助VT-x的虚拟技术和Oracle虚拟机平台，实现在本地电脑上搭建CDH大数据平台的环境，并搭建Kylin服务在其上面进行数据探索。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://lisenhui.cn/imgs/avatar.png"><meta itemprop=keywords content="大数据,Kylin"><meta property="og:type" content="article"><meta property="og:title" content="本地搭建Kylin运行环境实践"><meta property="og:description" content="借助VT-x的虚拟技术和Oracle虚拟机平台，实现在本地电脑上搭建CDH大数据平台的环境，并搭建Kylin服务在其上面进行数据探索。"><meta property="og:image" content="/imgs/avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://lisenhui.cn/tech/practice-of-local-deploy-kylin.html"><meta property="og:site_name" content="热爱生活与梦想"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="凡梦星尘"><meta property="article:published_time" content="2019-04-09 18:38:36 +0800 +0800"><meta property="article:modified_time" content="2019-04-09 18:38:36 +0800 +0800"><link type=text/css rel=stylesheet href=https://s4.zstatic.net/ajax/libs/font-awesome/6.6.0/css/all.min.css><link type=text/css rel=stylesheet href=https://s4.zstatic.net/ajax/libs/animate.css/4.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://s4.zstatic.net/ajax/libs/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1736338871"><link rel=stylesheet type=text/css href="/css/custom_style.css?=1736338871"><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"practice-of-local-deploy-kylin.html","permalink":"https://lisenhui.cn/tech/practice-of-local-deploy-kylin.html","title":"本地搭建Kylin运行环境实践","waline":{"commentcnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"},"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"2.15.8"}}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.id="LA_COLLECT",e.src="https://sdk.51.la/js-sdk-pro.min.js",e.async="true",e.onload=function(){LA.init({id:"JhW0FuUlJYQmqAJt",ck:"JhW0FuUlJYQmqAJt",autoTrack:!0})},document.head.appendChild(e)})</script><title>本地搭建Kylin运行环境实践 - 热爱生活与梦想</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>热爱生活与梦想</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>没有伞的孩子要学会努力奔跑 ✊</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-blog"><a href=/blog/ class=hvr-icon-pulse rel=section><i class="fa fa-blog hvr-icon"></i>博客点滴</a></li><li class="menu-item menu-item-tech"><a href=/tech/ class=hvr-icon-pulse rel=section><i class="fa fa-swatchbook hvr-icon"></i>技术锦囊</a></li><li class="menu-item menu-item-life"><a href=/life/ class=hvr-icon-pulse rel=section><i class="fa fa-pizza-slice hvr-icon"></i>生活花絮</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-link hvr-icon"></i>友情链接</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>90</span></a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class=search-result-container><div class=algolia-hits></div></div><div class=search-footer><div class=algolia-pagination></div><div class=search-meta-info><div class="search-hit-stats algolia-stats"></div><div class=search-vendor><span>Search By</span>
<a title=Algolia target=_blank href="https://www.algolia.com/?utm_source=instantsearch.js&utm_medium=website&utm_content=lisenhui.cn&utm_campaign=poweredby"><img src=/imgs/algolia-logo.svg></a></div></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#开启vt-x>开启VT-x</a></li><li><a href=#安装虚拟机>安装虚拟机</a></li><li><a href=#导入cdh虚机镜像>导入CDH虚机镜像</a></li><li><a href=#配置环境>配置环境</a></li><li><a href=#部署kylin>部署Kylin</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=凡梦星尘 src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.png><p class=site-author-name itemprop=name>凡梦星尘</p><div class=site-description itemprop=description>再平凡的人也有属于他的梦想 ✨</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>90</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>28</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>133</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/elkan1788 title="Github → https://github.com/elkan1788" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/lisenhui title="知乎 → https://www.zhihu.com/people/lisenhui" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class=xyears-blog><a href=https://www.foreverblog.cn/blog/3306.html title=十年之约 target=_blank><img src=/imgs/img-lazy-loading.gif data-src=https://img.foreverblog.cn/logo_en_default.png alt=十年之约 style=height:18px>
</a><a href=https://www.foreverblog.cn/go.html title=穿梭虫洞-随机访问十年之约友链博客 target=_blank><img src=/imgs/img-lazy-loading.gif data-src=https://img.foreverblog.cn/wormhole_3.gif alt=穿梭虫洞-随机访问十年之约友链博客></a></div><div class=boyouquan-blog><a href=https://www.boyouquan.com/home><img src=/imgs/img-lazy-loading.gif data-src=https://www.boyouquan.com/assets/images/sites/logo/logo-medium.png alt=博友圈>
</a><a href=https://www.boyouquan.com/planet-shuttle><img src=/imgs/img-lazy-loading.gif data-src=https://www.boyouquan.com/assets/images/sites/logo/planet-shuttle.png alt=星球穿梭-博友圈友></a></div><div class=not-by-ai><img src=/imgs/img-lazy-loading.gif data-src=/imgs/not-by-ai.png title=声明内容非AI生成 alt=声明内容非AI生成></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2010-09-05 10:11:53 +0000 UTC"></div></div><div id=la-siteinfo-widget style=display:none></div><div class=siteinfo-item><div class=item-name><i class="fa fa-user-plus"></i>今日访问：</div><div class=item-count id=today_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-user-clock"></i>昨日访问：</div><div class=item-count id=yesterday_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-arrows-down-to-people"></i>本月访问：</div><div class=item-count id=month_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-users"></i>总访问量：</div><div class=item-count id=total_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=107493></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=262></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2024-12-31 19:04:54 +0800 +0800"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/elkan1788 rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://lisenhui.cn/tech/practice-of-local-deploy-kylin.html><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.png"><meta itemprop=name content="凡梦星尘"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="凡梦星尘"><meta itemprop=description content="再平凡的人也有属于他的梦想 ✨"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="本地搭建Kylin运行环境实践"><meta itemprop=description content="借助VT-x的虚拟技术和Oracle虚拟机平台，实现在本地电脑上搭建CDH大数据平台的环境，并搭建Kylin服务在其上面进行数据探索。"></span><header class=post-header><h1 class=post-title itemprop="name headline">本地搭建Kylin运行环境实践
<a href=https://github.com/elkan1788/myblog-sources/tree/main/content/tech/2019/04-09-practice-of-local-deploy-kylin.md rel="noopener external nofollow noreferrer" target=_blank class="exturl post-edit-link" title=编辑><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2019年04月09日 18:38:36 CST" itemprop="dateCreated datePublished" datetime="2019-04-09 18:38:36 +0800 +0800">2019年04月09日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/kylin%E7%A5%9E%E5%85%BD/ itemprop=url rel=index><span itemprop=name>技术锦囊/Kylin神兽</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>2186</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>5分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/tech/practice-of-local-deploy-kylin.html><i class="fa fa-sync fa-spin"></i>
</span></span><span class=post-meta-item title><span class=post-meta-item-icon><i class="fas fa-solid fa-comments"></i>
</span><span class=post-meta-item-text title=评论>评论：
</span><span id=comments-count class=waline-comment-count data-path=/tech/practice-of-local-deploy-kylin.html><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><p><code>Apache Kylin</code>是运行在<code>Hadoop</code>集群之上的<code>OLAP</code>数据分析应用服务，在<code>Hadoop</code>生态中，大家对它的认可度和赞誉都很高，全球有超过1000+企业都在使用“麒麟”（Apache Kylin）这只神兽。而<code>Hadoop</code>集群的部署又并非易事，那这是否就阻碍了我们探究<code>Apache Kylin</code>的步伐呢？答案是否定的，通过借助强大的虚拟技术，在自己本地就能体验到“麒麟”的魅力，那么接下来就让我们一起进入“麒麟”的数据世界。</p><a id=more></a><p><img src=/imgs/img-lazy-loading.gif data-src=/imgs/2019/04-09-practice-of-local-deploy-kylin-01.jpg alt=Kylin大数据生态定位></p><p>部署前需要准备的材料有：</p><ul><li>一台8核，16G内存及以上配置的电脑</li><li>Oracle VirtualBox</li><li>Cloudera QuickStart VM</li><li>OracleJDK 1.8 / OpenJDK 8</li><li>Apache Kylin 2.6.1（CDH版本）</li></ul><h2 id=开启vt-x>开启VT-x
<a class=header-anchor href=#%e5%bc%80%e5%90%afvt-x></a></h2><p><code>Intel VT-x</code>完整名称是<code>Intel Virtualization Technology</code>，就是Intel虚拟技术，开启它可以让硬件平台同时运行多个操作系统，是虚拟机软件运行必备的技术之一。如果禁用，会在使用虚拟软件时弹出“此主机支持 Intel VT-x，但 Intel VT-x 处于禁用状态”这个提示，解决办法就是进<code>BIOS</code>开启<code>Intel Virtualization Technology</code>选项，保存后重启电脑即可。</p><p><img src=/imgs/img-lazy-loading.gif data-src=/imgs/2019/04-09-practice-of-local-deploy-kylin-02.png alt=开启VT-x虚拟技术></p><blockquote><p>注：不同类型的主板选项会有差异，可自行 Google 搜索下。</p></blockquote><h2 id=安装虚拟机>安装虚拟机
<a class=header-anchor href=#%e5%ae%89%e8%a3%85%e8%99%9a%e6%8b%9f%e6%9c%ba></a></h2><p>在此介绍的是<code>Oracle</code>旗下一款开源免费虚拟机软件，大家可到其官方网站：
<a href=http://www.virtualbox.org title=http://www.virtualbox.org rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://www.virtualbox.org
<i class="fa fa-external-link-alt"></i>
</a>进行下载，关于其的安装与使用可自行<code>Google</code>搜索学习，其实也非常的简单其乎就是“傻瓜式”的操作。顺便提下，Oracle 的<code>VirtualBox</code>天生就是支持中文的哟。</p><h2 id=导入cdh虚机镜像>导入CDH虚机镜像
<a class=header-anchor href=#%e5%af%bc%e5%85%a5cdh%e8%99%9a%e6%9c%ba%e9%95%9c%e5%83%8f></a></h2><p>通过对比几款不同的<code>Hadoop</code>虚拟集成环境后，最终选择了 Cloudera 提供的 QuickStart VM 镜像。此<code>VM</code>提供了最小可用环境，并非再一次通过<code>Docker</code>虚拟化出来的，这样便减少了不必要的资源开销，操作性上也是更贴合Linux原生体验。大家可访问其官方下载渠道
<a href=https://www.cloudera.com/downloads/quickstart_vms/5-13.html title=quickstart_vms_5-13 rel="noopener external nofollow noreferrer" target=_blank class=exturl>quickstart_vms_5-13
<i class="fa fa-external-link-alt"></i>
</a>获取最新的版本，注意选择对应的虚拟机支持类型。</p><blockquote><p>注：QuickStart VM 所涉及到的账户与密码默认都是 cloudera。</p></blockquote><p><img src=/imgs/img-lazy-loading.gif data-src=/imgs/2019/04-09-practice-of-local-deploy-kylin-03.png alt="导入QuickStart VM"></p><p>打开 Oracle VirtualBox 软件后在其主界面上点击左上方的管理菜单，找到导入虚拟电脑选项（或是使用 Ctrl+I 快捷组合键），点击进入并选取准备好的 QuickStart VM 文件，点击下一步配置虚拟电脑的资源。可根据实际情况分配资源，建议使用4核，8G内存及以上配置。同时为方便管理可自定义虚拟电脑的名称，如上图所示。最后点击导入按钮，导入过程大约10分钟左右，具体视机器资源而定。</p><h2 id=配置环境>配置环境
<a class=header-anchor href=#%e9%85%8d%e7%bd%ae%e7%8e%af%e5%a2%83></a></h2><p>启动虚拟电脑之前还需要修改一下网络配置，默认为<code>NAT</code>网络类型，无法与本地宿主机进行通讯，建议改用桥接网络类型（此连接模式有个缺点，即宿主机断网后便无法虚拟电脑进行通讯）。至此虚拟电脑的所有配置就准备就绪，点击<code>Oracle VitrualBox</code>主界面上的快捷启动按钮启动虚拟电脑，启动过程大约等待4~6分钟，然后便可进入熟悉的Linux系统桌面，如下图所示。系统默认已经启动所有Hadoop生态服务，但不包括CM组件，如无特殊也不建议开启，因为需要更多的资源。</p><p><img src=/imgs/img-lazy-loading.gif data-src=/imgs/2019/04-09-practice-of-local-deploy-kylin-04.png alt=quick-start-VM-Desktop></p><p>考虑本地机器的资源有限，因此只需要开启<code>Apache Kylin</code>运行的基础服务，如HDFS，HBase，Hive，ZooKeeper等相关的服务。打开终端并切换到root用户下，执行如下的命令关闭开机自启动服务，最后重新启动虚拟电脑。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig flume-ng-agent off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig hadoop-yarn-proxyserver off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig hue off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig htcacheclean off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig impala-catalog off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig impala-state-store off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig oozie off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig solr-server off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig spark-history-server off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig sqoop-metastore off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig sqoop2-server off</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># chkconfig spark-history-server off</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=部署kylin>部署Kylin
<a class=header-anchor href=#%e9%83%a8%e7%bd%b2kylin></a></h2><p>建议使用非root用户来运行<code>Apache Kylin</code>应用服务，因此需要创建个新的Linux系统用户，比如：kylin。另外从<code>Apache Kylin 2.5+</code>版本开始需要<code>JDK 1.8+</code>的运行环境支持，通过SSH客户端工具把准备好的<code>Oracle JDK1.8/OpenJDK 8</code>和<code>Apache Kylin 2.6.1</code>的安装包上传到虚拟机环境中，并在当前kylin用户下配置JAVA的运行环境。</p><p>同时需要对HBase的JAVA_HOME变量做相应的调整，切换到root用户执行如下的命令，最后重新启动HBase相关的服务。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># vi /usr/lib/hbase/conf/hbase-env.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e># The java implementation to use.  Java 1.7+ required.</span>
</span></span><span style=display:flex><span>export JAVA_HOME<span style=color:#f92672>=</span>/usr/lib/java/jdk1.8.0_201
</span></span><span style=display:flex><span><span style=color:#75715e># Tell HBase whether it should manage it&#39;s own instance of Zookeeper or not.</span>
</span></span><span style=display:flex><span>export HBASE_MANAGES_ZK<span style=color:#f92672>=</span>false
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># service hbase-master restart</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># service hbase-regionserver restart</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># service hbase-rest restart</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@quickstart ~<span style=color:#f92672>]</span><span style=color:#75715e># service hbase-thrift restart</span>
</span></span></code></pre></td></tr></table></div></div><p>然后解压<code>Apache Kylin</code>安装压缩包到自定义的目录下，参考官方的安装步骤
<a href=https://kylin.apache.org/docs/install/index.html#kylin-installation title=ylin-installation rel="noopener external nofollow noreferrer" target=_blank class=exturl>ylin-installation
<i class="fa fa-external-link-alt"></i>
</a>进行相关配置。由于Cloudera QuickStart VM 提供的CDH 5.13版本中使用的是 JDK1.7版本，所以需要对<code>${KYLIN_HOME}/conf</code>目录下的<code>kylin_job_conf.xml</code>和<code>kylin_job_conf_inmem.xml</code>文件中增加如下的配置：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;name&gt;</span>mapred.child.env<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;value&gt;</span>JAVA_HOME=/usr/lib/java/jdk1.8.0_201<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;name&gt;</span>yarn.app.mapreduce.am.env<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;value&gt;</span>JAVA_HOME=/usr/lib/java/jdk1.8.0_201<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>最后执行<code>check-env.sh</code>进行环境检测无误后，使用<code>sample.sh</code>脚本导入自带的示例数据，导入成功后再切换到<code>${KYLIN_HOME}/bin</code>目录下调用<code>kylin.sh start</code>命令启动。打开本地浏览器在地址栏输入：http://虚拟电脑IP:7070/kylin 进行访问，根据<code>Apache Kylin</code>官方网站的操作步骤进行相应Cube构建：
<a href=https://kylin.apache.org/docs/tutorial/kylin_sample.html title=kylin_sample rel="noopener external nofollow noreferrer" target=_blank class=exturl>kylin_sample
<i class="fa fa-external-link-alt"></i>
</a>。构建完成好后，可使用官方提供<code>SQL</code>进行测验对比，如下2张图所示，1条普通的带去重和排序汇总<code>SQL</code>查询，<code>Kylin</code>仅花费了<strong>0.13s</strong>的时间，而<code>Hive</code>却耗费<strong>43s</strong>的时间，查询性能明显提升数十倍以上。</p><p><img src=/imgs/img-lazy-loading.gif data-src=/imgs/2019/04-09-practice-of-local-deploy-kylin-05.png alt="Hive Query Speed">
<img src=/imgs/img-lazy-loading.gif data-src=/imgs/2019/04-09-practice-of-local-deploy-kylin-06.png alt="Kylin Query Speed"></p><p>怎么样！看到<code>Apache Kylin</code>如此之快的“神”速，是否也按捺不住想试一把，那就赶紧行动起来。下一次还会带来Kylin与Zeppelin整合做数据分析报告的精彩分享，欢迎持续关注。</p></div><footer class=post-footer><div class=post-tags><a href=/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/>大数据
</a><a href=/tags/kylin/>Kylin</a></div><div class=post-share-tools><div class=post-share-loading><i class="fa-solid fa-ellipsis fa-spin"></i></div><div class=sharethis-inline-share-buttons></div></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="凡梦星尘 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="凡梦星尘 - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
本地搭建Kylin运行环境实践</li><li class=post-copyright-author><strong>本文作者： </strong>凡梦星尘</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://lisenhui.cn/tech/practice-of-local-deploy-kylin.html title=本地搭建Kylin运行环境实践>https://lisenhui.cn/tech/practice-of-local-deploy-kylin.html</a></li><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/imgs/qq-channel.jpg><span class=icon><i class="fab fa-qq"></i>
</span><span class=label>QQ</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/tech/local-deploy-kylin-integrat-zeppelin.html rel=next title=本地部署Zeppelin集成Kylin制作数据分析><i class="fa fa-chevron-left"></i> 本地部署Zeppelin集成Kylin制作数据分析</a></div><div class="post-nav-prev post-nav-item"><a href=/tech/unable-create-tmp-file-in-hdfs-nodes.html rel=prev title="不能在HDFS Data节点上创建临时文件">不能在HDFS Data节点上创建临时文件
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div><div class=comment-switch><span class=first-comment>Waline</span>
<span class=switch-btn></span>
<span class=second-comment>Giscus</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=waline-container></div></div><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>凡梦星尘</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.139.4 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.7.0 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>粤ICP备18047355号-1</a>
<img src=/imgs/gongan.png alt=沪公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402009770" target=_blank>沪公网安备 31011402009770 号</a></div><div class=vendors-list><a target=_blank href=https://vercel.com title=Vercel><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/vercel.svg alt=Vercel>
</a><a target=_blank href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" title=又拍云><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/upyun.png alt=又拍云>
</a><a target=_blank href=https://github.com title=Github><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/github.svg alt=Github>
</a><a target=_blank href=https://www.leancloud.cn title=LeanCloud><img src=/imgs/img-lazy-loading.gif data-src=https://www.leancloud.cn/favicon.png alt=LeanCloud>
</a><a target=_blank href=https://www.zstatic.net title=zstatic><img src=/imgs/img-lazy-loading.gif data-src=https://www.zstatic.net/logo.png alt=zstatic>
</a><span>提供CDN/云资源支持</span></div></div></footer><script type=text/javascript src=https://s4.zstatic.net/ajax/libs/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://s4.zstatic.net/ajax/libs/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"algolia":{"cfg":{"apikey":"639c3c5992507251ead7be2153913cd0","appid":"NC5VDOMBRG","enable":true,"hits":{"perpage":10},"indexname":"site_indexes","limit":1e3},"instantjs":{"file":"dist/instantsearch.production.min.js","name":"instantsearch.js","version":"4.73.2"},"js":{"file":"dist/algoliasearch-lite.umd.js","name":"algoliasearch","version":"4.24.0"}},"bookmark":{"color":"#1b1b1b","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":"DIC_kwDOE8dfY84CQqz_","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"elkan1788/elkan1788.github.io","repoid":"MDEwOlJlcG9zaXRvcnkzMzE4MzMxODc=","theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://lisenhui.cn/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lawidget":{"id":"JhW0FuUlJYQmqAJt","js":"https://v6-widget.51.la/v6/laId/quote.js?theme=0\u0026col=true\u0026f=12\u0026display=0,0,0,1,0,1,1,1"},"lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"rotateInUpRight"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":true,"plugin":"waline"}},"root":"/","scheme":"Gemini","share":{"enable":true,"sharethis":{"id":"66aeda3e566923001d52f16c","js":"https://platform-api.sharethis.com/js/sharethis.js#property=id\u0026product=inline-share-buttons\u0026source=platform"}},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"zstatic","router":{"home":"https://www.zstatic.net","logo":"https://www.zstatic.net/logo.png","name":"zstatic","type":"modern","url":"https://s4.zstatic.net/ajax/libs"}},"version":"4.7.0","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o \n\n可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄\n(Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":"https://waline.lisenhui.cn/","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src="/js/main.min.js?=1736338872" defer></script></body></html>
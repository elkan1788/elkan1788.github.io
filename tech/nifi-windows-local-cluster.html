<!doctype html><html lang=zh-cn data-theme=dark><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.109.0"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon-32x32.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple-touch-icon.png><meta itemprop=name content="Apache Nifi在Windows环境下搭建伪群集及证书登录"><meta itemprop=description content="再平凡的人也有属于他的梦想 ✨"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://lisenhui.cn/imgs/avatar.png"><meta itemprop=keywords content="大数据,Nifi"><meta property="og:type" content="article"><meta property="og:title" content="Apache Nifi在Windows环境下搭建伪群集及证书登录"><meta property="og:description" content="再平凡的人也有属于他的梦想 ✨"><meta property="og:image" content="/imgs/avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://lisenhui.cn/tech/nifi-windows-local-cluster.html"><meta property="og:site_name" content="凡梦星尘"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="凡梦星尘"><meta property="article:published_time" content="2017-10-26 17:50:52 +0000 UTC"><meta property="article:modified_time" content="2017-10-26 17:50:52 +0000 UTC"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.0daa9f4484c3c8cfb347306adc84c242e1f145067c3f4baafa6fc43bf2dee3fb.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><link rel=stylesheet type=text/css href=/css/custom_style.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"nifi-windows-local-cluster.html","permalink":"https://lisenhui.cn/tech/nifi-windows-local-cluster.html","title":"Apache Nifi在Windows环境下搭建伪群集及证书登录","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.id="LA_COLLECT",e.src="https://sdk.51.la/js-sdk-pro.min.js",e.async="true",e.onload=function(){LA.init({id:"JhW0FuUlJYQmqAJt",ck:"JhW0FuUlJYQmqAJt",autoTrack:!0})},document.head.appendChild(e)})</script><title>Apache Nifi在Windows环境下搭建伪群集及证书登录 - 凡梦星尘</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏 role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>凡梦星尘</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>没有伞的孩子要学会努力奔跑 ✊</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-blog"><a href=/blog/ class=hvr-icon-pulse rel=section><i class="fa fa-blog hvr-icon"></i>博客点滴</a></li><li class="menu-item menu-item-tech"><a href=/tech/ class=hvr-icon-pulse rel=section><i class="fa fa-swatchbook hvr-icon"></i>技术集锦</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-link hvr-icon"></i>友情链接</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>68</span></a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class=search-result-container><div class=algolia-hits></div></div><div class=search-footer><div class=algolia-pagination></div><div class=search-meta-info><div class="search-hit-stats algolia-stats"></div><div class=search-vendor><span>Search By</span>
<a title=Algolia target=_blank href="https://www.algolia.com/?utm_source=instantsearch.js&utm_medium=website&utm_content=lisenhui.cn&utm_campaign=poweredby"><img src=/imgs/algolia-logo.svg></a></div></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#生成本地nifi服务证书>生成本地<strong>Nifi</strong>服务证书</a></li><li><a href=#拷贝nifi服务证书>拷贝<strong>Nifi</strong>服务证书</a></li></ul><ul><li><a href=#创建目录及id>创建目录及id</a></li><li><a href=#更新zk配置>更新<strong>ZK</strong>配置</a></li><li><a href=#更新nifi配置>更新Nifi配置</a></li><li><a href=#更新state配置>更新State配置</a></li></ul><ul><li><a href=#添加admin用户>添加Admin用户</a></li><li><a href=#安装证书>安装证书</a></li></ul><ul><li><a href=#模板上传>模板上传</a></li><li><a href=#创建流程>创建流程</a></li><li><a href=#启动流程>启动流程</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=凡梦星尘 src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.png><p class=site-author-name itemprop=name>凡梦星尘</p><div class=site-description itemprop=description>再平凡的人也有属于他的梦想 ✨</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>68</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>28</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>82</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/elkan1788 title="Github → https://github.com/elkan1788" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>Github</a></span>
<span class=links-of-social-item><a href=https://www.zhihu.com/people/lisenhui title="知乎 → https://www.zhihu.com/people/lisenhui" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>知乎</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class=xyears-blog><a href=https://www.foreverblog.cn/blog/3306.html title=十年之约 target=_blank><img src=/imgs/img-lazy-loading.gif data-src=https://img.foreverblog.cn/logo_en_default.png alt=十年之约 style=height:16px></a>
<a href=https://www.foreverblog.cn/go.html title=穿梭虫洞-随机访问十年之约友链博客 target=_blank><img src=/imgs/img-lazy-loading.gif data-src=https://img.foreverblog.cn/wormhole_3.gif alt=穿梭虫洞-随机访问十年之约友链博客 style=height:24px></a></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=2010-09-05T10:11:53+00:00></div></div><div id=la-siteinfo-widget style=display:none></div><div class=siteinfo-item><div class=item-name><i class="fa fa-user-plus"></i>今日访问：</div><div class=item-count id=today_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-user-clock"></i>昨日访问：</div><div class=item-count id=yesterday_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-arrows-down-to-people"></i>本月访问：</div><div class=item-count id=month_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-users"></i>总访问量：</div><div class=item-count id=total_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=79258></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=194></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2022-10-23T19:16:19+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a>
<a href=https://github.com/elkan1788 rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://lisenhui.cn/tech/nifi-windows-local-cluster.html><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.png"><meta itemprop=name content="凡梦星尘"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="凡梦星尘"><meta itemprop=description content="再平凡的人也有属于他的梦想 ✨"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Apache Nifi在Windows环境下搭建伪群集及证书登录"><meta itemprop=description content="前些时间做了关于Apache Nifi分布式集群的搭建分享，但很多时候要搭建分布式集群机器资源是个问题，而现在的单机的配置还是相当不错的，故现在就做个关于Windows上搭建个伪分布式集群的分享，同时通过另外一种方式实现Apache Nifi的授权认证。
系统环境及软件版本


Windows8.1


JDK1.8.0_131


Nifi-1.4.0





Nifi安装目录
WEB端口




xxx\nifi-ncm
9443


xxx\nifi-cluster01
9444


xxx\nifi-cluster02
9445




(其它版本可参考此篇文章)
另在测试中发个问题，使用Apache Nifi内嵌的Zookeeper搭建伪集群里启动总是提示端口占用的问题，故放弃只采用了单结点启动。
"></span><header class=post-header><h1 class=post-title itemprop="name headline">Apache Nifi在Windows环境下搭建伪群集及证书登录
<a href=https://github.com/elkan1788/myblog-sources/tree/main/content/tech/2017/10-26-nifi-windows-local-cluster.md rel="noopener external nofollow noreferrer" target=_blank class="exturl post-edit-link" title=编辑><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text>发表于：</span>
<time title="发表于：2017-10-26 17:50:52 +0000 UTC" itemprop="dateCreated datePublished" datetime="2017-10-26 17:50:52 +0000 UTC">2017-10-26</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text>分类于：</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE itemprop=url rel=index><span itemprop=name>大数据</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字数：</span><span>2148</span></span>
<span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>阅读：&ap;</span>
<span>5分钟</span></span>
<span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="far fa-eye"></i></span>
<span class=post-meta-item-text>浏览：</span>
<span class=waline-pageview-count data-path=/tech/nifi-windows-local-cluster.html><i class="fa fa-sync fa-spin"></i></span></span>
<span class=post-meta-item title=评论><span class=post-meta-item-icon><i class="far fa-comments"></i></span>
<span class=post-meta-item-text>评论：</span>
<span class=waline-comment-count data-path=/tech/nifi-windows-local-cluster.html><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p>前些时间做了关于<code>Apache Nifi</code>分布式集群的搭建分享，但很多时候要搭建分布式集群机器资源是个问题，而现在的单机的配置还是相当不错的，故现在就做个关于Windows上搭建个伪分布式集群的分享，同时通过另外一种方式实现<strong>Apache Nifi</strong>的授权认证。</p><h1 id=系统环境及软件版本>系统环境及软件版本</h1><ul><li><p>Windows8.1</p></li><li><p>JDK1.8.0_131</p></li><li><p>Nifi-1.4.0</p></li></ul><table><thead><tr><th style=text-align:center>Nifi安装目录</th><th style=text-align:center>WEB端口</th></tr></thead><tbody><tr><td style=text-align:center>xxx\nifi-ncm</td><td style=text-align:center>9443</td></tr><tr><td style=text-align:center>xxx\nifi-cluster01</td><td style=text-align:center>9444</td></tr><tr><td style=text-align:center>xxx\nifi-cluster02</td><td style=text-align:center>9445</td></tr></tbody></table><blockquote><p>(其它版本可参考此篇文章)
另在测试中发个问题，使用<code>Apache Nifi</code>内嵌的<code>Zookeeper</code>搭建伪集群里启动总是提示端口占用的问题，故放弃只采用了单结点启动。</p></blockquote><h1 id=nifi的服务证书><strong>Nifi</strong>的服务证书</h1><h2 id=生成本地nifi服务证书>生成本地<strong>Nifi</strong>服务证书</h2><p>解压<code>nifi-toolkit-1.4.0-bin.tar.gz</code>文件后，通过<strong>CMD</strong>进入<code>bin</code>目录，执行以下的命令：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>D:<span style=color:#ae81ff>\D</span>evelopTools<span style=color:#ae81ff>\n</span>ifi-toolkit-1.4.0<span style=color:#ae81ff>\b</span>in&gt;tls-toolkit.bat standalone -n <span style=color:#e6db74>&#34;localhost(
</span></span></span><span style=display:flex><span><span style=color:#e6db74>3)&#34;</span> -C <span style=color:#e6db74>&#34;CN=Admin, OU=ApacheNIFI&#34;</span> -o <span style=color:#e6db74>&#34;..\target&#34;</span>
</span></span><span style=display:flex><span>2017/10/26 18:21:32 INFO <span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> org.apache.nifi.toolkit.tls.standalone.TlsToolki
</span></span><span style=display:flex><span>tStandaloneCommandLine: No nifiPropertiesFile specified, using embedded one.
</span></span><span style=display:flex><span>2017/10/26 18:21:32 INFO <span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> org.apache.nifi.toolkit.tls.standalone.TlsToolki
</span></span><span style=display:flex><span>tStandalone: Running standalone certificate generation with output directory ..<span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>target
</span></span><span style=display:flex><span>******************************************************************************
</span></span><span style=display:flex><span>2017/10/26 18:21:34 INFO <span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> org.apache.nifi.toolkit.tls.standalone.TlsToolki
</span></span><span style=display:flex><span>tStandalone: Successfully generated client certificate ..<span style=color:#ae81ff>\t</span>arget<span style=color:#ae81ff>\C</span>N<span style=color:#f92672>=</span>Admin_OU<span style=color:#f92672>=</span>Apa
</span></span><span style=display:flex><span>cheNIFI.p12
</span></span><span style=display:flex><span>2017/10/26 18:21:34 INFO <span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> org.apache.nifi.toolkit.tls.standalone.TlsToolki
</span></span><span style=display:flex><span>tStandalone: tls-toolkit standalone completed successfully
</span></span></code></pre></td></tr></table></div></div><p>生成后的目录结构如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>Folder PATH listing <span style=color:#66d9ef>for</span> volume senhui.li
</span></span><span style=display:flex><span>Volume serial number is 000000F0 FA46:A0EB
</span></span><span style=display:flex><span>D:.
</span></span><span style=display:flex><span>│  CN<span style=color:#f92672>=</span>Admin_OU<span style=color:#f92672>=</span>ApacheNIFI.p12
</span></span><span style=display:flex><span>│  CN<span style=color:#f92672>=</span>Admin_OU<span style=color:#f92672>=</span>ApacheNIFI.password
</span></span><span style=display:flex><span>│  nifi-cert.pem
</span></span><span style=display:flex><span>│  nifi-key.key
</span></span><span style=display:flex><span>│
</span></span><span style=display:flex><span>├─localhost
</span></span><span style=display:flex><span>│      keystore.jks
</span></span><span style=display:flex><span>│      nifi.properties
</span></span><span style=display:flex><span>│      truststore.jks
</span></span><span style=display:flex><span>│
</span></span><span style=display:flex><span>├─localhost_2
</span></span><span style=display:flex><span>│      keystore.jks
</span></span><span style=display:flex><span>│      nifi.properties
</span></span><span style=display:flex><span>│      truststore.jks
</span></span><span style=display:flex><span>│
</span></span><span style=display:flex><span>└─localhost_3
</span></span><span style=display:flex><span>        keystore.jks
</span></span><span style=display:flex><span>        nifi.properties
</span></span><span style=display:flex><span>        truststore.jks
</span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>特意注意：</strong> <em>-C &ldquo;CN=Admin, OU=ApacheNIFI&rdquo;</em> 中间的空格必须保留</p></blockquote><h2 id=拷贝nifi服务证书>拷贝<strong>Nifi</strong>服务证书</h2><ul><li>将<code>localhost</code>目录下的文件拷贝到<code>nifi-ncm</code>目录下替换所有的文件</li><li>将<code>localhost_2</code>目录下的文件拷贝到<code>nifi-cluster01</code>目录下替换所有的文件</li><li>将<code>localhost_3</code>目录下的文件拷贝到<code>nifi-cluster02</code>目录下替换所有的文件</li><li>将<code>CN=Admin_OU=ApacheNIFI.p12</code>和<code>CN=Admin_OU=ApacheNIFI.password</code>拷贝到桌面备用，后续登录需要使用</li></ul><h1 id=配置单点zookeeper相关>配置单点Zookeeper相关</h1><h2 id=创建目录及id>创建目录及id</h2><p>进入<code>nifi-ncm</code>的目录，创建woker目录，并把server id写到文件中，命令如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>D:<span style=color:#ae81ff>\D</span>evelopTools<span style=color:#ae81ff>\n</span>ifi-ncm&gt;mkdir -p state<span style=color:#ae81ff>\z</span>ookeeper
</span></span><span style=display:flex><span>D:<span style=color:#ae81ff>\D</span>evelopTools<span style=color:#ae81ff>\n</span>ifi-ncm&gt;echo -n <span style=color:#e6db74>&#39;1&#39;</span> &gt; state/zookeeper/myid
</span></span></code></pre></td></tr></table></div></div><h2 id=更新zk配置>更新<strong>ZK</strong>配置</h2><p>进入<code>nifi-ncm</code>的conf目录，打开<code>zookeeper.properties</code>文件，内容更新参考如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>clientPort</span><span style=color:#f92672>=</span><span style=color:#e6db74>2181</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>initLimit</span><span style=color:#f92672>=</span><span style=color:#e6db74>10</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>autopurge.purgeInterval</span><span style=color:#f92672>=</span><span style=color:#e6db74>24</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>syncLimit</span><span style=color:#f92672>=</span><span style=color:#e6db74>5</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>tickTime</span><span style=color:#f92672>=</span><span style=color:#e6db74>2000</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>dataDir</span><span style=color:#f92672>=</span><span style=color:#e6db74>./state/zookeeper</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>autopurge.snapRetainCount</span><span style=color:#f92672>=</span><span style=color:#e6db74>30</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 只需要配置端口服务</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>server.1</span><span style=color:#f92672>=</span><span style=color:#e6db74>localhost:2181</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=更新nifi配置>更新Nifi配置</h2><p>进入<code>nifi-ncm</code>的conf目录，打开<code>nifi.properties</code>文件，更新如下的配置属性：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>nifi.state.management.embedded.zookeeper.start</span><span style=color:#f92672>=</span><span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># zookeeper properties, used for cluster management #</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 另外两个节点，只要编辑此字段即可</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>nifi.zookeeper.connect.string</span><span style=color:#f92672>=</span><span style=color:#e6db74>localhost:2181</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=更新state配置>更新State配置</h2><p>进入<code>nifi-ncm</code>的conf目录，打开<code>state-management.xml</code>文件，更新<strong>zookeeper</strong>配置，如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;cluster-provider&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;id&gt;</span>zk-provider<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;class&gt;</span>org.apache.nifi.controller.state.providers.zookeeper.ZooKeeperStateProvider<span style=color:#f92672>&lt;/class&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Connect String&#34;</span><span style=color:#f92672>&gt;</span>localhost:2181<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Root Node&#34;</span><span style=color:#f92672>&gt;</span>/nifi<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Session Timeout&#34;</span><span style=color:#f92672>&gt;</span>10 seconds<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Access Control&#34;</span><span style=color:#f92672>&gt;</span>Open<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/cluster-provider&gt;</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>然后把此文件拷贝到<code>nifi-cluster01</code>和<code>nifi-cluster02</code>相同的目录下</p></blockquote><h1 id=配置nifi-admin>配置Nifi Admin</h1><h2 id=添加admin用户>添加Admin用户</h2><p>进入<code>nifi-ncm</code>的conf目录，打开<code>authorizers.xml</code>文件，找到<strong>file-provider</strong>添加如下配置：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;authorizer&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;identifier&gt;</span>file-provider<span style=color:#f92672>&lt;/identifier&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;class&gt;</span>org.apache.nifi.authorization.FileAuthorizer<span style=color:#f92672>&lt;/class&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Authorizations File&#34;</span><span style=color:#f92672>&gt;</span>./conf/authorizations.xml<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Users File&#34;</span><span style=color:#f92672>&gt;</span>./conf/users.xml<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Initial Admin Identity&#34;</span><span style=color:#f92672>&gt;</span>CN=Admin, OU=ApacheNifi<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Legacy Authorized Users File&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Node Identity 1&#34;</span><span style=color:#f92672>&gt;</span>CN=localhost, OU=NIFI<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Node Identity 2&#34;</span><span style=color:#f92672>&gt;</span>CN=localhost_2, OU=NIFI<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Node Identity 3&#34;</span><span style=color:#f92672>&gt;</span>CN=localhost_3, OU=NIFI<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/authorizer&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>然后把此文件同时拷贝到别外两个节点目录。</p><blockquote><p><strong>注：</strong> 在<code>Node Identity x</code>中的OU要写成<em><strong>NIFI</strong></em>，尝试过用别的名称好像不成功，具体的原因未知，感兴趣的可以自行探究一二。</p></blockquote><h2 id=安装证书>安装证书</h2><p>打开谷歌浏览器，在设置中找到安全选项中找到<strong>管理证书</strong>，点击Import开始导入上面生成的证书：<code>CN=Admin_OU=ApacheNIFI.p12</code>，密码在后缀名为<code>.password</code>的文件中，如下图所示：
<img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-00.png alt=WIN-NIFI-CLUSTER-00>
<img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-01.png alt=WIN-NIFI-CLUSTER-01></p><h1 id=启动nifi服务>启动Nifi服务</h1><p>进入到Nifi安装目录，然后在bin目录中找到run-nifi.bat文件并双击运行，注意启动的顺序： nifi-ncm&ndash;>nifi-cluster01/2，等待片刻后（可能会有点久，需要一个选举的过程）打开浏览器输入"https://localhost:9443/nifi"，选择刚刚导入的证书，如看到下面的画面表示启动成功：
<img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-02.png alt=WIN-NIFI-CLUSTER-02>
<img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-03.png alt=WIN-NIFI-CLUSTER-03></p><h1 id=用户策略>用户策略</h1><p>刚登录NIFI页面时，你会发现图标都是灰色的，需要赋予相应的权限才可以开始编辑权限才可以开始编辑。点击页面左侧面板上的钥匙图标，会弹出访问策略的窗口，如下图所示：</p><p>在此会看到用户列表为空，那么就要给相应的行为添加用户，点击<strong>Create</strong>链接即可开始添加，如下图所示：
<img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-04.png alt=WIN-NIFI-CLUSTER-04>
<img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-05.png alt=WIN-NIFI-CLUSTER-05>
<img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-044.png alt=WIN-NIFI-CLUSTER-044></p><p>待所有的权限添加完成后，便可看到NIFI页面的按钮已经点亮，可以开始创建流程。</p><h1 id=示例演示>示例演示</h1><h2 id=模板上传>模板上传</h2><p>下载
<a href title=DEMO>DEMO
</a>压缩包，解压出来有个<code>WordCountDemo.xml</code>文件。然后打开浏览器输入NIFI访问地址： <code>https://localhost:9443/nifi/</code>，点击左侧面板中的上传按钮上传模板，如下图所示：
<img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-06.png alt=WIN-NIFI-CLUSTER-06></p><h2 id=创建流程>创建流程</h2><p>拖动NIFI页面顶部的模板按钮到画板空白处，点击<em>ADD</em>按钮即可，然后双击打开<code>WordCountDemo</code>组找到<code>PutFile</code>组件，修改目录地址为你机器的实际可访问路径，如下图所示：</p><p><img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-07.png alt=WIN-NIFI-CLUSTER-07>
<img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-08.png alt=WIN-NIFI-CLUSTER-08></p><h2 id=启动流程>启动流程</h2><p>点击NIFI页面左下角的<code>NiFi Flow</code>链接返回到主面板，点击<code>WordCountDemo</code>组，然后点击左侧面板中的开始按钮启动流程，如下图所示：</p><p><img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-09.png alt=WIN-NIFI-CLUSTER-09></p><p>如无异常那么此时你可在目录下找到名为<strong>telltale_heart_wordcount</strong>的文件，打开便可看到如下图的统计内容：</p><p><img src=/imgs/img-lazy-loading.gif data-src=//imgs.lisenhui.cn/blog/2017/10-26-WIN-NIFI-CLUSTER-10.png alt=WIN-NIFI-CLUSTER-10></p><p>至此在本地搭建NIFI伪集群就完成了，有问题欢迎留言。</p></div><footer class=post-footer><div class=post-tags><a href=/tags/%e5%a4%a7%e6%95%b0%e6%8d%ae>大数据</a>
<a href=/tags/nifi>Nifi</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="凡梦星尘 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="凡梦星尘 - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right><ul><li class=post-copyright-title><strong>文章标题：</strong>
Apache Nifi在Windows环境下搭建伪群集及证书登录</li><li class=post-copyright-author><strong>本文作者：</strong>
凡梦星尘</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://lisenhui.cn/tech/nifi-windows-local-cluster.html title="Apache Nifi在Windows环境下搭建伪群集及证书登录">https://lisenhui.cn/tech/nifi-windows-local-cluster.html</a></li><li class=post-copyright-license><strong>版权声明：</strong>
本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/imgs/qq-channel.jpg><span class=icon><i class="fab fa-qq"></i></span>
<span class=label>QQ</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i></span>
<span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/tech/axure-lightbox-shade.html rel=next title=Axure教程：实现动态的遮罩层><i class="fa fa-chevron-left"></i> Axure教程：实现动态的遮罩层</a></div><div class="post-nav-prev post-nav-item"><a href=/tech/ninfi-cluster-deploy-with-kerberos.html rel=prev title="Apache Nifi集群搭建及用kerberos实现用户认证">Apache Nifi集群搭建及用kerberos实现用户认证
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div><div class=comment-switch><span class=first-comment>Giscus</span>
<span class="switch-btn move"></span>
<span class=second-comment>Waline</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=waline-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2023</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>凡梦星尘</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.109.0 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.4.1 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>粤ICP备18047355号-1</a>
<img src=/imgs/gongan.png alt=沪公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402009770" target=_blank>沪公网安备 31011402009770 号</a></div><div class=vendors-list><a target=_blank href=https://upyun.com title=又拍云><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/upyun.png alt=又拍云></a>
<a target=_blank href=https://github.com title=Github>Github</a>
<a target=_blank href=https://www.leancloud.cn title=LeanCloud>LeanCloud</a>
<a target=_blank href=https://webify.cloudbase.net title=Webify>Webify</a>
<span>提供CDN/云资源支持</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"addthis":{"cfg":{"pubid":"ra-6049e46e9ee22127"},"js":"https://s7.addthis.com/js/300/addthis_widget.js"},"algolia":{"cfg":{"apikey":"639c3c5992507251ead7be2153913cd0","appid":"NC5VDOMBRG","enable":true,"hits":{"perpage":10},"indexname":"site_indexes"},"instantjs":{"file":"dist/instantsearch.production.min.js","name":"instantsearch.js","version":"4.49.0"},"js":{"file":"dist/algoliasearch-lite.umd.js","name":"algoliasearch","version":"4.14.2"}},"bookmark":{"color":"#1b1b1b","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":"DIC_kwDOE8dfY84CQqz_","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"elkan1788/elkan1788.github.io","repoid":"MDEwOlJlcG9zaXRvcnkzMzE4MzMxODc=","theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://lisenhui.cn","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lawidget":{"id":"JhW0FuUlJYQmqAJt","js":"https://v6-widget.51.la/v6/laId/quote.js?theme=0\u0026col=true\u0026f=12\u0026display=0,0,0,1,0,1,1,1"},"lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"rotateInUpRight"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"statis":{"enable":true,"plugin":"51la"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.4.1","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":true,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":"https://lcweb.lisenhui.cn","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.9ab05ff9a11d8e0913242f2c5671d1fd9a95fdbcd82cb86c5d9c16639dc7fa7f.js defer></script></body></html>
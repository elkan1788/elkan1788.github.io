<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.156.0"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon-32x32.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple-touch-icon.png><meta itemprop=name content="博客站点升级使用 Hugo NexT 最新主题"><meta itemprop=description content="时隔2年的时间，又再一次折腾自己的博客站点，全面升级为最新移植的 NexT 主题。"><meta name=description content="时隔2年的时间，又再一次折腾自己的博客站点，全面升级为最新移植的 NexT 主题。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://lisenhui.cn/imgs/avatar.png"><meta itemprop=keywords content="Hugo,博客,NexT,主题"><link rel=canonical href=https://lisenhui.cn/blog/upgrade-blog-use-new-theme.html><meta property="og:type" content="article"><meta property="og:title" content="博客站点升级使用 Hugo NexT 最新主题"><meta property="og:description" content="时隔2年的时间，又再一次折腾自己的博客站点，全面升级为最新移植的 NexT 主题。"><meta property="og:image" content="/imgs/avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://lisenhui.cn/blog/upgrade-blog-use-new-theme.html"><meta property="og:site_name" content="热爱生活与梦想"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="凡梦星尘"><meta property="article:published_time" content="2022-08-07 20:55:56 +0800 CST"><meta property="article:modified_time" content="2022-08-10 22:36:26 +0800 CST"><link type=text/css rel=stylesheet href=https://unpkg.com/@fortawesome/fontawesome-free@6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=https://unpkg.com/animate.css@3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://unpkg.com/viewerjs@1.11.6/dist/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1771593431"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><link rel=stylesheet type=text/css href="/css/custom_style.css?=1771593431"><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.id="LA_COLLECT",e.src="https://sdk.51.la/js-sdk-pro.min.js",e.async="true",e.onload=function(){LA.init({id:"JhW0FuUlJYQmqAJt",ck:"JhW0FuUlJYQmqAJt",autoTrack:!0})},document.head.appendChild(e)})</script><title>博客站点升级使用 Hugo NexT 最新主题 - 热爱生活与梦想</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>热爱生活与梦想</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>没有伞的孩子要学会努力奔跑 ✊</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-blog"><a href=/blog/ class=hvr-icon-pulse rel=section><i class="fa fa-blog hvr-icon"></i>博客点滴</a></li><li class="menu-item menu-item-tech"><a href=/tech/ class=hvr-icon-pulse rel=section><i class="fa fa-swatchbook hvr-icon"></i>技术锦囊</a></li><li class="menu-item menu-item-life"><a href=/life/ class=hvr-icon-pulse rel=section><i class="fa fa-pizza-slice hvr-icon"></i>生活花絮</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-link hvr-icon"></i>友情链接</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>101</span></a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class=search-result-container><div class=algolia-hits></div></div><div class=search-footer><div class=algolia-pagination></div><div class=search-meta-info><div class="search-hit-stats algolia-stats"></div><div class=search-vendor><span>Search By</span>
<a title=Algolia target=_blank href="https://www.algolia.com/?utm_source=instantsearch.js&utm_medium=website&utm_content=lisenhui.cn&utm_campaign=poweredby"><img src=/imgs/algolia-logo.svg></a></div></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#配置更新>配置更新</a></li><li><a href=#文章拷贝>文章拷贝</a></li><li><a href=#评论迁移>评论迁移</a></li><li><a href=#在线搜索>在线搜索</a></li><li><a href=#发布测试>发布测试</a></li><li><a href=#后续计划>后续计划</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=凡梦星尘 src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.png><p class=site-author-name itemprop=name>凡梦星尘</p><div class=site-description itemprop=description>再平凡的人也有属于他的梦想 ✨</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>101</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>31</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>152</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/elkan1788 title="Github → https://github.com/elkan1788" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/lisenhui title="知乎 → https://www.zhihu.com/people/lisenhui" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="2010-09-05 10:11:53 +0000 UTC"></div></div><div id=la-siteinfo-widget style=display:none></div><div class=siteinfo-item><div class=item-name><i class="fa fa-user-plus"></i>今日访问：</div><div class=item-count id=today_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-user-clock"></i>昨日访问：</div><div class=item-count id=yesterday_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-arrows-down-to-people"></i>本月访问：</div><div class=item-count id=month_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-users"></i>总访问量：</div><div class=item-count id=total_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=122988></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=298></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2026-02-19 20:31:07 +0800 CST"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/elkan1788 rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://lisenhui.cn/blog/upgrade-blog-use-new-theme.html><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.png"><meta itemprop=name content="凡梦星尘"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="凡梦星尘"><meta itemprop=description content="再平凡的人也有属于他的梦想 ✨"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="博客站点升级使用 Hugo NexT 最新主题"><meta itemprop=description content="时隔2年的时间，又再一次折腾自己的博客站点，全面升级为最新移植的 NexT 主题。"></span><header class=post-header><h1 class=post-title itemprop="name headline">博客站点升级使用 Hugo NexT 最新主题
<a href=https://github.com/elkan1788/myblog-sources/tree/main/content/blog/2022/08-07-upgrade-blog-use-new-theme.md rel="noopener external nofollow noreferrer" target=_blank class="exturl post-edit-link" title=编辑><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2022年08月07日 20:55:56 CST" itemprop="dateCreated datePublished" datetime="2022-08-07 20:55:56 +0800 CST">2022年08月07日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title="修改时间：2022年08月10日 22:36:26 CST" itemprop="dateModified dateLastmod" datetime="2022-08-10 22:36:26 +0800 CST">2022年08月10日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E5%BB%BA%E7%AB%99%E4%B9%8B%E8%B7%AF/ itemprop=url rel=index><span itemprop=name>博客点滴/建站之路</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>2520</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>6分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=pageview-count data-path=/blog/upgrade-blog-use-new-theme.html><i class="fa fa-sync fa-spin"></i>
</span></span><span class=post-meta-item title><span class=post-meta-item-icon><i class="fas fa-solid fa-comments"></i>
</span><span class=post-meta-item-text title=评论>评论：
</span><span id=comments-count data-path=/blog/upgrade-blog-use-new-theme.html><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><div class=post-expired-tip id=post-expired-tip><div class=post-expired-title><i class="fa-solid fa-hourglass-half"></i>
<span>温馨提醒</span></div><div id=post-expired-content class=post-expired-content></div></div><p>时隔 2 年的时间后，如今又再一次开始折腾自己的博客站点，看来是自己有点太躁动啦&#x1f602;。在上海疫情期间也真有点压抑的，为了消除这份不安的情绪，决定参考
<a href=https://theme-next.js.org/ title="Hexo NexT" rel="noopener external nofollow noreferrer" target=_blank class=exturl><strong>Hexo NexT</strong>
<i class="fa fa-external-link-alt"></i>
</a>从零开始全面重构 <code>NexT</code> 主题，也在独自奋斗的2个多月断断续续时间里完成主体功能所有移植工作（其实一直想有人参与进来共建，直接跑到人家 Hexo NexT 用户群“呼喊”，但也是没有浪花泛起，只好是自己继续独立前行）。 这不乘着周末的时间，把自己的站点也是升级到最新开发的主题，同时也是为后续想升级旧版本 <code>Hugo NexT</code> 的用户打个样吧。</p><a id=more></a><div class="note info"><strong>注意：</strong> 以下的操作记录，如果你已经熟悉 <code>Hugo</code> 使用，了解 <code>Hugo NexT</code> 主题相关配置，那么效果会更加好。 不熟悉也没有关系，你可以克隆
<a href=https://github.com/hugo-next/hugo-next-docs title=hugo-next-docs rel="noopener external nofollow noreferrer" target=_blank class=exturl><strong>hugo-next-docs</strong>
<i class="fa fa-external-link-alt"></i>
</a>项目进行参考，相信你会有所收获！ &#9994; &#x1f604;</div><h2 id=配置更新>配置更新
<a class=header-anchor href=#%e9%85%8d%e7%bd%ae%e6%9b%b4%e6%96%b0></a></h2><p>首先声明一下配置文件已经和旧版本完全不兼容，因此在配置主题时无须参考原来的配置，只须根据新版本主题提供
<a href=https://gitee.com/hugo-next/hugo-theme-next/blob/main/exampleSite/config.yaml title=示例配置文件 rel="noopener external nofollow noreferrer" target=_blank class=exturl><strong>示例配置文件</strong>
<i class="fa fa-external-link-alt"></i>
</a>里面的注释说明调整自己站点信息即可，如站点名称，标题，头像，菜单，评论等个性化设置。</p><p>主题默认提供的是单一配置文件的经典模式，可能很多人都会比较喜欢这样的简便风格，但个人还是更喜欢 <code>Hugo</code> 那种按目录进行分类管理的形式，不仅方便于环境的切换（默认使用develpment环境，直接执行<code>hugo server</code>命令即可），而且在本地开发时能有效的屏蔽某些配置参数泄漏，比如搜索引擎的KEY信息，整体的目录结构参考如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>config
</span></span><span class=line><span class=cl>├── _default        <span class=c1>## 默认生产发布的配置文件</span>
</span></span><span class=line><span class=cl>│   ├── config.yaml <span class=c1>## Hugo 引擎配置参数</span>
</span></span><span class=line><span class=cl>│   ├── menus.yaml  <span class=c1>## 站点菜单项</span>
</span></span><span class=line><span class=cl>│   └── params.yaml <span class=c1>## 各类效果，组件参数配置</span>
</span></span><span class=line><span class=cl>└── development     <span class=c1>## 本地开发预览的配置文件（不上传到代码仓库）</span></span></span></code></pre></td></tr></table></div></div><p>当在本地运行 <code>hugo server</code> 命令预览站点时，会读取 <code>development</code> 文件夹里的参数配置。而当运行 <code>hugo</code> 命令生成全站静态文件时，会默认读取 <code>_default</code> 文件夹里的参数配置，这便实现开发环境与部署环境相互隔离，互不影响的完美效果！</p><div class="note info"><strong>注：</strong> 如果是从 Hexo 迁移过来的用户，那么本主题的配置文件兼容性可达 90% 以上 &#x1f44d; 。</div><h2 id=文章拷贝>文章拷贝
<a class=header-anchor href=#%e6%96%87%e7%ab%a0%e6%8b%b7%e8%b4%9d></a></h2><p>文章内容这块的默认情况下是无须任何的调整，新版本的主题文章头部参数设置与旧版主题是保持向下兼容的，包括之前是应用其他主题的文章也可以兼容（因为用的是标准的 FrontMatter 参数），因此一般情况下只要拷贝到 <code>content</code> 目录下相同的位置即可。</p><p>不过自己又稍微折腾了一下，原因是之前的文章都是在 <code>content\posts</code> 一个目录中并没有做好分类管理，想通过此次的升级重新整理下文章的分类，而且新版本的主题中已经可以支持多个自定义目录。另外之前的文章链接中都是带有日期想进一步缩短链接长度，而且也发现 <code>Hugo</code> 中有 <code>aliases</code> 功能特别的强大，无需担心之前 SEO 的链接无法正常访问，语法参考如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;让 Nginx 将 HTTP 请求转发到 HTTPS 安全模式&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c>## 新的链接地址</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>blog/make-nginx-support-http-ssl-request.html</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c>## 旧的链接地址</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>aliases</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>/2022/05/05/make-nginx-support-http-ssl-request.html</span></span></span></code></pre></td></tr></table></div></div><p>因此也用 <code>Python</code> 写了个小脚本进行自动生成新的链接地址，代码参考如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span><span class=lnt id=hl-2-29><a class=lnlinks href=#hl-2-29>29</a>
</span><span class=lnt id=hl-2-30><a class=lnlinks href=#hl-2-30>30</a>
</span><span class=lnt id=hl-2-31><a class=lnlinks href=#hl-2-31>31</a>
</span><span class=lnt id=hl-2-32><a class=lnlinks href=#hl-2-32>32</a>
</span><span class=lnt id=hl-2-33><a class=lnlinks href=#hl-2-33>33</a>
</span><span class=lnt id=hl-2-34><a class=lnlinks href=#hl-2-34>34</a>
</span><span class=lnt id=hl-2-35><a class=lnlinks href=#hl-2-35>35</a>
</span><span class=lnt id=hl-2-36><a class=lnlinks href=#hl-2-36>36</a>
</span><span class=lnt id=hl-2-37><a class=lnlinks href=#hl-2-37>37</a>
</span><span class=lnt id=hl-2-38><a class=lnlinks href=#hl-2-38>38</a>
</span><span class=lnt id=hl-2-39><a class=lnlinks href=#hl-2-39>39</a>
</span><span class=lnt id=hl-2-40><a class=lnlinks href=#hl-2-40>40</a>
</span><span class=lnt id=hl-2-41><a class=lnlinks href=#hl-2-41>41</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>append_alias_fm</span><span class=p>(</span><span class=n>source</span><span class=p>,</span> <span class=n>target</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;&#34;&#34;在原来的博客文章中添加新的 aliases 变量
</span></span></span><span class=line><span class=cl><span class=s2>  :param source: 原始目录
</span></span></span><span class=line><span class=cl><span class=s2>  :param target: 目标目录
</span></span></span><span class=line><span class=cl><span class=s2>  &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>root</span><span class=p>,</span><span class=n>dirs</span><span class=p>,</span><span class=n>files</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>walk</span><span class=p>(</span><span class=n>source</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>folders</span> <span class=o>=</span> <span class=n>root</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\\</span><span class=s1>&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>t_sub_folder</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>dirs</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>folders</span><span class=p>)</span><span class=o>&gt;</span><span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>t_sub_folder</span> <span class=o>=</span> <span class=n>folders</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=n>t_sub_folder_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>t_sub_folder</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>t_sub_folder_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>t_sub_folder_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Current Folder: </span><span class=si>%s</span><span class=s2>&#34;</span> <span class=o>%</span> <span class=n>t_sub_folder</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>file</span> <span class=ow>in</span> <span class=n>files</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>t_sub_folder</span><span class=p>,</span> <span class=n>file</span><span class=p>),</span> <span class=s2>&#34;wb+&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>tf</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>file</span><span class=p>),</span> <span class=s2>&#34;rb+&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>sf</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Current File: </span><span class=si>%s</span><span class=s2>&#34;</span> <span class=o>%</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>sf</span><span class=o>.</span><span class=n>name</span><span class=p>))</span>
</span></span><span class=line><span class=cl>          <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>              <span class=n>line</span> <span class=o>=</span> <span class=n>sf</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span>
</span></span><span class=line><span class=cl>              <span class=n>line_splits</span> <span class=o>=</span> <span class=n>line</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span><span class=o>.</span><span class=n>splitlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>              <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>line_splits</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>              <span class=n>line_str</span> <span class=o>=</span> <span class=n>line_splits</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>              <span class=k>if</span> <span class=s1>&#39;url&#39;</span> <span class=ow>in</span> <span class=n>line_str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>old_url</span> <span class=o>=</span> <span class=n>line_str</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;: &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>new_url</span> <span class=o>=</span> <span class=n>old_url</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)[</span><span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=s1>&#39;&#34;&#39;</span> <span class=ow>in</span> <span class=n>old_url</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                  <span class=n>old_url</span> <span class=o>=</span> <span class=n>old_url</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=s1>&#39;&#34;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                  <span class=n>new_url</span> <span class=o>=</span> <span class=n>new_url</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=s1>&#39;&#34;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>tf</span><span class=o>.</span><span class=n>write</span><span class=p>((</span><span class=s1>&#39;url: blog/&#39;</span><span class=o>+</span> <span class=n>new_url</span> <span class=o>+</span> <span class=s1>&#39;</span><span class=se>\r\n</span><span class=s1>&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>                <span class=n>tf</span><span class=o>.</span><span class=n>write</span><span class=p>((</span><span class=s1>&#39;aliases: </span><span class=se>\r\n</span><span class=s1>  - /&#39;</span><span class=o>+</span> <span class=n>old_url</span> <span class=o>+</span> <span class=s1>&#39;</span><span class=se>\r\n</span><span class=s1>&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>                <span class=n>tf</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>sf</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span>
</span></span><span class=line><span class=cl>              <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>tf</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>              <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Somethings wrong!!!&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>              <span class=n>traceback</span><span class=o>.</span><span class=n>print_exc</span><span class=p>()</span>
</span></span><span class=line><span class=cl>              <span class=k>break</span></span></span></code></pre></td></tr></table></div></div><p>修改后的文章经过测试都能正常的访问，发布上线后，通过搜索引擎检索到的旧链接地址都能正常的访问，并成功跳转到新的链接地址，不过为了 SEO 更加友好，还是同步把新的 <code>sitemap.xml</code> 文件重新提交给各个搜索引擎。</p><h2 id=评论迁移>评论迁移
<a class=header-anchor href=#%e8%af%84%e8%ae%ba%e8%bf%81%e7%a7%bb></a></h2><p>相比文章拷贝来说评论迁移就比较繁琐些，本博客一直使用的都是 <code>Waline</code> 评论插件，它提供了一个导入导出的功能，原以为只是将原文章地址进行替换后导入就可以。但结果是草率了，修改后的文件导入居然失败了，然后尝试换成了 LeanCloud 官方的导入功能便成功，本以为迁移工作到此就结束了，结果又来了如下问题：</p><p><div class=post-img-wrapper><div class=img-container><img src=/imgs/img-lazy-loading.gif data-src=https://imgs.lisenhui.cn/blog/2022/08-07-waline-comment-error.png alt=08-07-waline-comment-error.png title=08-07-waline-comment-error.png></div></div></p><p>真是无语至极呀，还好之前也处理过类似的情况，接着就又对数据一阵“魔改”，终于是搞定好了天下太平，评论功能也总算是恢复正常，自己发个板凳留念下。</p><h2 id=在线搜索>在线搜索
<a class=header-anchor href=#%e5%9c%a8%e7%ba%bf%e6%90%9c%e7%b4%a2></a></h2><p>新版本的主题支持 <code>Alogia</code> 在线搜索引擎，观察过不少站点（特别是一些文档类的网站都在使用），开发主题时也体验了下它的功能，觉得还是蛮不错的，搜索和响应速度也挺快的。 开发好后集成也是相对比较简单，只是多了个注册和上传索引文件的操作。原以为索引是自动根据站点路径生成，还好 <code>Github</code> 提供了 CI 支持，可以省去上传这步操作，直接实现流程的全自动化。 这里使用的是 <code>Github Action</code> 功能，脚本参考如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5>5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6>6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7>7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8>8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=w> </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upload Algolia Indexes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ALGOLIA_APPID</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.ALGOLIA_APPID }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ALGOLIA_ADMINKEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.ALGOLIA_ADMINKEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ALGOLIA_INDEXNAME</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.ALGOLIA_INDEXNAME }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ALGOLIA_INDEXFILE</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./public/algolia.json&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      npm install --location=global @algolia/cli
</span></span></span><span class=line><span class=cl><span class=sd>      algolia import -s $ALGOLIA_INDEXFILE -a $ALGOLIA_APPID -k $ALGOLIA_ADMINKEY -n $ALGOLIA_INDEXNAME</span></span></span></code></pre></td></tr></table></div></div><div class="note info">相比较于本地搜索功能，<strong>Algolia</strong> 还提供搜索分析的数据报告，能更好的帮你观测自己的站点和用户搜索行为。</div><h2 id=发布测试>发布测试
<a class=header-anchor href=#%e5%8f%91%e5%b8%83%e6%b5%8b%e8%af%95></a></h2><p>一切准备就绪那么接下来就发布上线，同样的原则能够自动化的坚决不手动，利用 <code>Github Action</code> 提供的功能，实现站点静态文件自动编译，发布等操作。还有一步重要的同步备份流程不能忘呀，也算是安全意识的一部分吧，便于后续不时之需，所以个有习惯把代码都同步到 <code>Gitee</code> 仓库，而且有网友开发 <code>Gitee Pages</code> 的刷新功能，又再次避免手动操作的麻烦，相当于是一次同时发布了 2 个站点，参考脚本如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span><span class=lnt id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a>
</span><span class=lnt id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a>
</span><span class=lnt id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a>
</span><span class=lnt id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a>
</span><span class=lnt id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a>
</span><span class=lnt id=hl-4-27><a class=lnlinks href=#hl-4-27>27</a>
</span><span class=lnt id=hl-4-28><a class=lnlinks href=#hl-4-28>28</a>
</span><span class=lnt id=hl-4-29><a class=lnlinks href=#hl-4-29>29</a>
</span><span class=lnt id=hl-4-30><a class=lnlinks href=#hl-4-30>30</a>
</span><span class=lnt id=hl-4-31><a class=lnlinks href=#hl-4-31>31</a>
</span><span class=lnt id=hl-4-32><a class=lnlinks href=#hl-4-32>32</a>
</span><span class=lnt id=hl-4-33><a class=lnlinks href=#hl-4-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=c>## 同步到 Gitee 代码仓库备份</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync-2-gitee</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>needs</span><span class=p>:</span><span class=w> </span><span class=l>deploy-site</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync Site Source</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>wearerequired/git-mirror-action@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SSH_PRIVATE_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.RSA_PRIVATE_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>source-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@github.com:elkan1788/myblog-sources.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>destination-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@gitee.com:lisenhui/myblog-sources.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync Site Build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>wearerequired/git-mirror-action@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SSH_PRIVATE_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.RSA_PRIVATE_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>source-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@github.com:elkan1788/elkan1788.github.io.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>destination-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@gitee.com:lisenhui/lisenhui.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c>## 刷新 Gitee Page 服务（备份站点）</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>reload-pages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>needs</span><span class=p>:</span><span class=w> </span><span class=l>sync-2-gitee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Gitee Pages by GitAction</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>yanglbme/gitee-pages-action@main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-username</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_USERNAME }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-repo</span><span class=p>:</span><span class=w> </span><span class=l>lisenhui/lisenhui</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>main</span></span></span></code></pre></td></tr></table></div></div><h2 id=后续计划>后续计划
<a class=header-anchor href=#%e5%90%8e%e7%bb%ad%e8%ae%a1%e5%88%92></a></h2><p>对比了下旧版本主题的编译速度，迁移至新主题后效率直接提升 <strong>4</strong> 倍以上，再配合 <code>Hugo</code> 引擎的性能表现，本博客现有的 270 个页面生成只需要 <strong>600ms</strong> ，结果就是一个字 “<strong>快</strong>”，也呼吁大家尽早迁移到新版本的主题上使用，不仅能享用新功能，还可以体验下那“快感”&#x1f604;。 后面也会持续做好站点生成速度的优化，尽可能的提升到极限&#x1f601;。</p><p><div class=post-img-wrapper><div class=img-container><img src=/imgs/img-lazy-loading.gif data-src=https://imgs.lisenhui.cn/blog/2022/08-07-github-action-hugo.png alt=08-07-github-action-hugo.png title=08-07-github-action-hugo.png></div></div></p><blockquote><p>也希望能够吸引到更多的小伙伴们，一起参与进来共同建设 <code>Hugo NexT</code> 主题。</p></blockquote><p>除了主题的开发工作外，也会做好博客内容的打造。 在此也感谢
<a href=https://dusays.com/ title=杜老师 rel="noopener external nofollow noreferrer" target=_blank class=exturl>杜老师
<i class="fa fa-external-link-alt"></i>
</a>的“引荐”，才知道原来还有个叫做
<a href=https://xyears.cn/ title=十年之约 rel="noopener external nofollow noreferrer" target=_blank class=exturl><strong>十年之约</strong>
<i class="fa fa-external-link-alt"></i>
</a>的博客友人们组织。 自己现也是
<a href=https://www.foreverblog.cn/blog/3306.html title=入会十年之约 rel="noopener external nofollow noreferrer" target=_blank class=exturl>入会十年之约
<i class="fa fa-external-link-alt"></i>
</a>，算是给自己立的 &#x1f6a9;，也相信自己能在博客运营上面一直地坚持下去。&#x1f389;</p></div><footer class=post-footer><div class=post-tags><a href=/tags/hugo/>Hugo
</a><a href=/tags/%E5%8D%9A%E5%AE%A2/>博客
</a><a href=/tags/next/>NexT
</a><a href=/tags/%E4%B8%BB%E9%A2%98/>主题</a></div><div class=post-share-tools><div class=post-share-loading><i class="fa-solid fa-ellipsis fa-spin"></i></div><div class=sharethis-inline-share-buttons></div></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="凡梦星尘 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="凡梦星尘 - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg class=cc-icon width=75 height=75 align=right alt=共享知识 title=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
博客站点升级使用 Hugo NexT 最新主题</li><li class=post-copyright-author><strong>本文作者： </strong>凡梦星尘</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://lisenhui.cn/blog/upgrade-blog-use-new-theme.html title="博客站点升级使用 Hugo NexT 最新主题">https://lisenhui.cn/blog/upgrade-blog-use-new-theme.html</a></li><li class=post-copyright-license><strong>版权声明： </strong>本作品采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans>BY-NC-SA</a> 许可协议。转载请注明出处！</li><li><div class=license-icons><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans target=_blank><img src=/imgs/cc/big/by_nc_sa.svg alt=BY-NC-SA title=BY-NC-SA>
</a><a href=https://notbyai.fyi target=_blank><img src=/imgs/notbyai/zh-hans/black.svg title="Not By AI"></a></div></li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/imgs/qq-channel.jpg><span class=icon><i class="fab fa-qq"></i>
</span><span class=label>QQ</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/blog/use-custom-domain-active-vercel-waline.html rel=next title=使用自定义域名激活Vercel部署的Waline服务><i class="fa fa-chevron-left"></i> 使用自定义域名激活Vercel部署的Waline服务</a></div><div class="post-nav-prev post-nav-item"><a href=/blog/make-nginx-support-http-ssl-request.html rel=prev title="让 Nginx 将 HTTP 请求转发到 HTTPS 安全模式">让 Nginx 将 HTTP 请求转发到 HTTPS 安全模式
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div><div class=comment-switch><span class=first-comment>Waline3</span>
<span class=switch-btn></span>
<span class=second-comment>Giscus</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=waline3-container></div></div><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2026
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>凡梦星尘</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.156.0 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.9.0 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>粤ICP备18047355号-1</a>
<img src=/imgs/gongan.png alt=沪公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402009770" target=_blank>沪公网安备 31011402009770 号</a></div><div class=vendors-list><a target=_blank href=https://vercel.com title=Vercel><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/vercel.svg alt=Vercel>
</a><a target=_blank href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" title=又拍云><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/upyun.png alt=又拍云>
</a><a target=_blank href=https://github.com title=Github><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/github.svg alt=Github>
</a><a target=_blank href=https://www.leancloud.cn title=LeanCloud><img src=/imgs/img-lazy-loading.gif data-src=https://www.leancloud.cn/favicon.png alt=LeanCloud>
</a><a target=_blank href=https://unpkg.com title=unpkg><img src=/imgs/img-lazy-loading.gif data-src=https://static-production.npmjs.com/b0f1a8318363185cc2ea6a40ac23eeb2.png alt=unpkg>
</a><span>提供CDN/云资源支持</span></div></div></footer><script class=next-config data-name=page type=application/json>{"clipboard":{"js":{"alias":"clipboard","file":"dist/clipboard.min.js","name":"clipboard.js","version":"2.0.11"}},"comments":true,"expired":true,"expiredTips":{"info":"🕰️ 嗨，这篇文章已是#前的陈年佳酿，信息可能需要更新，阅读前请检查最佳赏味期限。","warn":"🚀 注意啦！这篇文章来自#以前，可能已跟不上时代的步伐。阅读时请自备时光机，小心穿越哦！"},"isHome":false,"isPage":true,"path":"upgrade-blog-use-new-theme.html","permalink":"https://lisenhui.cn/blog/upgrade-blog-use-new-theme.html","title":"博客站点升级使用 Hugo NexT 最新主题","toc":true,"waline3":{"commentcnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"3.12.2"},"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"3.12.2"}}}</script><script type=text/javascript src=https://unpkg.com/animejs@3.2.2/lib/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://unpkg.com/viewerjs@1.11.6/dist/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"algolia":{"cfg":{"apikey":"639c3c5992507251ead7be2153913cd0","appid":"NC5VDOMBRG","enable":true,"hits":{"perpage":10},"indexname":"site_indexes","limit":1e3},"instantjs":{"file":"dist/instantsearch.production.min.js","name":"instantsearch.js","version":"4.73.2"},"js":{"file":"dist/algoliasearch-lite.umd.js","name":"algoliasearch","version":"4.24.0"}},"bookmark":{"color":"#1b1b1b","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":"DIC_kwDOE8dfY84CQqz_","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"elkan1788/elkan1788.github.io","repoid":"MDEwOlJlcG9zaXRvcnkzMzE4MzMxODc=","theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://lisenhui.cn/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":false,"lang":"zh-CN","lawidget":{"id":"JhW0FuUlJYQmqAJt","js":"https://v6-widget.51.la/v6/laId/quote.js?theme=0\u0026col=true\u0026f=12\u0026display=0,0,0,1,0,1,1,1"},"lazyload":false,"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"rotateInUpRight"}},"postmeta":{"comments":{"enable":true,"plugin":"waline3"},"views":{"enable":true,"plugin":"waline3"}},"root":"/","scheme":"Gemini","share":{"enable":true,"sharethis":{"id":"66aeda3e566923001d52f16c","js":"https://platform-api.sharethis.com/js/sharethis.js#property=id\u0026product=inline-share-buttons\u0026source=platform"}},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"unpkg","router":{"home":"https://unpkg.com","logo":"https://static-production.npmjs.com/b0f1a8318363185cc2ea6a40ac23eeb2.png","name":"unpkg","type":"nodejs","url":"https://unpkg.com"}},"version":"4.9.0","waline3":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o \\n\\n可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄\\n(Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":"https://waline-neon.lisenhui.cn/","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"3.12.2"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"3.12.2"}}}</script><script type=text/javascript src="/js/main.min.js?=1771593431" defer></script><script type=text/javascript src="/js/clipboard.min.js?=1771593431" defer></script></body></html>
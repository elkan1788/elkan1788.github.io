---
title: "VirtualBox6.x版本CPU时钟Bug导致虚拟机无法开机"
url: "2022/04/21/virtualbox6-cup-clock-not-started.html"
date: "2022-04-21T18:39:47+08:00"
draft: false
categories:
 - "工具"
tags:
 - "工具"
 - "VirtualBox"
 - "VMWare"
 - "虚拟机"
---

下午在启动平时常用的虚拟环境时，发现进度条卡在中间老半天都不会动，情况不太正常，以前启动时间最多也就是 10 几分钟就能看到桌面。点击键盘的方向键看打印的日志，一直在重复如下图所示的 Bug 信息，即使后面等待了半个多小时进入系统后，这个日志信息也不断的在终端界面上输出。

<!--more-->

![CPU Clock Bug](//imgs.lisenhui.cn/blog/2022/04-21-virtualbox-startup-failed.png)

见此觉得很是纳闷呀，也没有对虚拟机的设置和里面的系统做过任何参数调整，为何突然就这样不可使用啦。然后尝试了下其他的虚拟机环境，但是都正常成功的启动，这下子就更加郁闷无语啦。先是测试了重新导入新的镜像文件现象依然存在，然后又试了下网上的各种方法，如修改启动脚本，调整CPU分配，关闭开机服务等都没有效果。后来找做运维的朋友咨询了下，建议可以尝试下使用 VMWare 能否正常启动，于是乎便开始下载软件，安装，配置等各种折腾起来。最后导入到了 VMWare 环境中，点击虚拟机启动，成功的进入到了系统，各项功能也能正常运转。真是神奇！！！

难道后续要切换使用 VMWare 环境使用虚拟机，但在尝试导入 Windows 平台虚拟机时失败了。那看来还是得想下办法能否修复上面遇到的问题，便又在网络上开始漫游希望能否找到解决办法。在寻找的过程中突然想到，为何不去 VitualBox 官方网站试试，然后在官网中输入 CPU 作为关键字，还真找到了篇类似的问题，总结下来就是这是 VirtualBox 6.x 版本的 BUG 影响，建议回退到之前的旧版本。然后在官方的归档库中找到了 5.x 的最新版本测试了下，之前遇到的问题果真就不存在。

至此问题算是解决了，但真的不明白为何会突然这样，之前也是使用 6.x 版本也没有出现过该问题，莫非说是特定的时间触发的 Bug 产生，真有点丈二和尚摸不着头脑，只能是写文记于此吧。


参考：

[Nested virtualization BUG: soft lockup - CPU#4 stuck for 22s!](https://www.virtualbox.org/ticket/19561)

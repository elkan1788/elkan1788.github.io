---
title: JQuery+ strusts1.x implements Ajax login without refresh
url: 2010/09/05/jquery-ajax-struts1.html
date: "2010-09-05 10:11:53"
tags: 
  - Juqery
  - Front
  - Struts
categories:
  - Front
---

In today's increasingly mature technology development, people not only pursue technological innovation and development, but also pay more attention to the convenience of interaction with users.When programmers are still confused about the issue of data refresh before and after interaction, Ajax came out, it won the majority of programmers with the advantages of convenience and quickness.After a few years of development, it has gradually become an essential tool in our development, I will talk about a Struts1 '+' Ajax login example.

<!--more-->

JS plugin used: jQuery 1.3.2 Chinese version, jQuery. Form2.43

Let's take a look at the core JS code in the page:

```javascript

function submitForm()
 {
    // Use jQuery. Form plugin to serialize the form data   
    var form = $("form[name=AdminLoginForm]");
    // Configure the parameters of ajaxForm in jQuery.form 
    // success Callback function when the operation succeeds   
    // resetForm Refresh the form or not   
    // dataType The type of data returned by the receiving server, including script, XML, JSON, etc   
    var options = {
        success: showResponse,
        resetForm: false,
        dataType: "script"
    };
    // ajax Send the form data to the server  
    form.ajaxForm(options);
    return false;

}

//callback function  
function showResponse(responseText, statusText) {
    if (statusText == "success")
    {
        alert(responseText);

    }
    else
    {
        alert("Due to communication problems, please log in later！");

    }

}

```

In the above code, we can see that using jQuery and jQuery.form, we can interact with the background data in just three lines of code.
JQuery is a very powerful plugin for JS. I like it very much. It is easy to call and has a good code style.
You can study it when you are free.

Let's move on to the Struts Action code:

```

public ActionForward execute(ActionMapping mapping, ActionForm form,           
            HttpServletRequest request, HttpServletResponse response)           
            throws Exception {           
       // Output mode and encoding format           
       response.setContentType("text/html; charset=utf-8");           
       PrintWriter out = response.getWriter();           
       // Get form data           
       AdminLoginForm adminLogin = (AdminLoginForm) form;           
       // Gets the captcha generated by the server           
       String validateCode = request.getSession().getAttribute("validateCode").toString();           
       try {           
          // Determine whether the verification code entered by the user is correct           
          if (adminLogin.getVerifycode().equalsIgnoreCase(validateCode)) {           
               // The state of the user name           
               boolean isUser = false;           
               // Verify that the user name exists           
               if(!adminLogin.getUsername().equalsIgnoreCase("elkan")){           
                       out.print("The user name you entered does not exist, please reenter!");           
                       return null;           
                   }else{           
                       isUser = true;           
                   }           
                // Verify that the password is valid           
               if(adminLogin.getUserpswd().equalsIgnoreCase("lisenhui2010") && isUser){           
                    out.print("Login successful!");           
                }else{           
                    out.print("Wrong password, please re-enter!");           
                    return null;           
                }           
            } else {           
                out.print("Incorrect verification code, please reenter!");           
                return null;           
            }                      
         } catch (Exception e) {           
            out.print(e.toString());           
        }           
      return null;           
 }

```

Finally, there is the following struts-config.xml configuration file:

```

<action-mappings>    
   
   <action         
       input="/webstage/adminLogin.jsp"       
       name="AdminLoginForm"       
       path="/AdminLogin"       
       scope="request"       
       type="com.elkan.struts.actions.AdminLogin"       
       validate="false"/>  
     
</action-mappings>

```

Having said that, let's take a look at the above code to achieve the effect：

![struts1-ajax-1](http://imgs.lisenhui.cn/2010/09-05-struts1-ajax-1.jpg)

![struts1-ajax-2](http://imgs.lisenhui.cn/2010/09-05-struts1-ajax-2.jpg)

![struts1-ajax-3](http://imgs.lisenhui.cn/2010/09-05-struts1-ajax-3.jpg)


See the above effect, do you also want to show their skills, then hurry to do it, I believe that with the above code tips to do a DEMO should not be very difficult, if there is any problem you can leave a message to me.
Thanks for your support.
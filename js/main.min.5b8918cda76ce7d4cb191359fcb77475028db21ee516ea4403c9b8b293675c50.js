window.NexT||(window.NexT={}),function(){const s='next-config',e={};let t={};const o=e=>JSON.parse(e||'{}'),n=n=>{const i=document.querySelector(`.${s}[data-name="${n}"]`);if(!i)return;const a=o(i.text);n==='main'?Object.assign(e,a):t[n]=a};n('main'),window.NexT.CONFIG=new Proxy({},{get(i,s){let o;if(s in e?o=e[s]:(s in t||n(s),o=t[s]),!(s in i)&&typeof o=='object'&&(i[s]={}),s in i){const e=i[s];return typeof e=='object'&&typeof o=='object'?new Proxy({...o,...e},{set(s,t,n){return s[t]=n,e[t]=n,!0}}):e}return o}})}(),HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this),this.parentNode.removeChild(this),e.appendChild(this)},function(){const e=()=>document.dispatchEvent(new Event('page:loaded',{bubbles:!0}));document.readyState==='loading'?document.addEventListener('readystatechange',e,{once:!0}):e(),document.addEventListener('pjax:success',e)}(),NexT.utils={checkDOMExist:function(e){return document.querySelector(e)!=null},getCDNResource:function(i){let{plugins:a,router:o}=NexT.CONFIG.vendor,{name:t,version:n,file:s,alias:r}=i,c=t,e='';switch(a){case'cdnjs':let i=r||t,a=s.replace(/\.js$/,'.min.js').replace(/^(dist|lib|source\/js|)\/(browser\/|)/,'');e=`${o}/${i}/${n}/${a}`;break;default:e=`${o}/${c}@${n}/${s}`}return e},replacePostCRLink:function(){if(NexT.CONFIG.hostname.startsWith('http'))return;let e=window.location.href;e.indexOf('#')>-1&&(e=e.split('#')[0]);let t=document.getElementById('post-cr-link');if(!t)return;t.text=e,t.href=e},registerCopyCode:function(){if(!NexT.CONFIG.copybtn)return;let e=document.querySelectorAll('.highlight pre');if(e.length===0||!NexT.CONFIG.copybtn)return;e.forEach(e=>{let n=e.querySelector('code').className;if(n=='')return;e.insertAdjacentHTML('beforeend','<div class="copy-btn"><i class="fa fa-copy fa-fw"></i></div>');const t=e.querySelector('.copy-btn');t.addEventListener('click',()=>{const s=e.querySelector('.code')||e.querySelector('code'),n=s.innerText;if(navigator.clipboard)navigator.clipboard.writeText(n).then(()=>{t.querySelector('i').className='fa fa-check-circle fa-fw'},()=>{t.querySelector('i').className='fa fa-times-circle fa-fw'});else{const e=document.createElement('textarea');e.style.top=window.scrollY+'px',e.style.position='absolute',e.style.opacity='0',e.readOnly=!0,e.value=n,document.body.append(e),e.select(),e.setSelectionRange(0,n.length),e.readOnly=!1;const s=document.execCommand('copy');t.querySelector('i').className=s?'fa fa-check-circle fa-fw':'fa fa-times-circle fa-fw',e.blur(),t.blur(),document.body.removeChild(e)}}),e.addEventListener('mouseleave',()=>{setTimeout(()=>{t.querySelector('i').className='fa fa-copy fa-fw'},300)})})},wrapTableWithBox:function(){document.querySelectorAll('table').forEach(t=>{const e=document.createElement('div');e.className='table-container',t.wrap(e)})},registerVideoIframe:function(){document.querySelectorAll('iframe').forEach(e=>{const t=['www.youtube.com','player.vimeo.com','player.youku.com','player.bilibili.com','www.tudou.com'].some(t=>e.src.includes(t));if(t&&!e.parentNode.matches('.video-container')){const t=document.createElement('div');t.className='video-container',e.wrap(t);const n=Number(e.width),s=Number(e.height);n&&s&&(t.style.paddingTop=s/n*100+'%')}})},registerScrollPercent:function(){const e=document.querySelector('.back-to-top'),t=document.querySelector('.reading-progress-bar');window.addEventListener('scroll',()=>{if(e||t){const s=document.body.scrollHeight-window.innerHeight,n=s>0?Math.min(100*window.scrollY/s,100):0;e&&(e.classList.toggle('back-to-top-on',Math.round(n)>=5),e.querySelector('span').innerText=Math.round(n)+'%'),t&&t.style.setProperty('--progress',n.toFixed(2)+'%')}if(!Array.isArray(NexT.utils.sections))return;let n=NexT.utils.sections.findIndex(e=>e&&e.getBoundingClientRect().top>10);n===-1?n=NexT.utils.sections.length-1:n>0&&n--,this.activateNavByIndex(n)},{passive:!0}),e&&e.addEventListener('click',()=>{window.anime({targets:document.scrollingElement,duration:500,easing:'linear',scrollTop:0})})},registerTabsTag:function(){document.querySelectorAll('.tabs ul.nav-tabs .tab').forEach(e=>{e.addEventListener('click',s=>{if(s.preventDefault(),e.classList.contains('active'))return;const n=e.parentNode;[...n.children].forEach(t=>{t.classList.toggle('active',t===e)});const t=document.getElementById(e.querySelector('a').getAttribute('href').replace('#',''));if([...t.parentNode.children].forEach(e=>{e.classList.toggle('active',e===t)}),t.dispatchEvent(new Event('tabs:click',{bubbles:!0})),!NexT.CONFIG.stickytabs)return;const o=n.parentNode.getBoundingClientRect().top+window.scrollY+10;window.anime({targets:document.scrollingElement,duration:500,easing:'linear',scrollTop:o})})}),window.dispatchEvent(new Event('tabs:register'))},registerCanIUseTag:function(){window.addEventListener('message',({data:e})=>{if(typeof e=='string'&&e.includes('ciu_embed')){const t=e.split(':')[1],n=e.split(':')[2];document.querySelector(`iframe[data-feature=${t}]`).style.height=parseInt(n,10)+5+'px'}},!1)},registerSidebarTOC:function(){this.sections=[...document.querySelectorAll('.post-toc li a.nav-link')].map(e=>{const t=document.getElementById(decodeURI(e.getAttribute('href')).replace('#',''));return e.addEventListener('click',n=>{n.preventDefault();const s=t.getBoundingClientRect().top+window.scrollY;window.anime({targets:document.scrollingElement,duration:500,easing:'linear',scrollTop:s,complete:()=>{history.pushState(null,document.title,e.href)}})}),t})},registerPostReward:function(){const e=document.querySelector('.reward-container button');if(!e)return;e.addEventListener('click',()=>{document.querySelector('.post-reward').classList.toggle('active')})},initCommontesDispaly:function(){const e=document.querySelectorAll('.comment-wrap > div');if(e.length<=1)return;e.forEach(function(e){var t=window.getComputedStyle(e,null).display;e.style.display=t})},registerCommonSwitch:function(){const e=document.querySelector('.comment-switch .switch-btn');if(!e)return;const t=document.querySelectorAll('.comment-wrap > div');e.addEventListener('click',()=>{e.classList.toggle('move'),t.forEach(function(e){e.style.display==='none'?e.style.cssText="display: block; animation: tabshow .8s":e.style.cssText="display: none;"})})},hideCommontes:function(){document.querySelector('.post-comments').style.display='none'},hiddeLodingCmp:function(e){const t=document.querySelector(e).previousElementSibling;t.style.display='none'},activateNavByIndex:function(s){const e=document.querySelectorAll('.post-toc li a.nav-link')[s];if(!e||e.classList.contains('active-current'))return;document.querySelectorAll('.post-toc .active').forEach(e=>{e.classList.remove('active','active-current')}),e.classList.add('active','active-current');let t=e.parentNode;for(;!t.matches('.post-toc');)t.matches('li')&&t.classList.add('active'),t=t.parentNode;const n=document.querySelector('.sidebar-panel-container');if(!n.parentNode.classList.contains('sidebar-toc-active'))return;window.anime({targets:n,duration:200,easing:'linear',scrollTop:n.scrollTop-n.offsetHeight/2+e.getBoundingClientRect().top-n.getBoundingClientRect().top})},updateSidebarPosition:function(){if(window.innerWidth<992||NexT.CONFIG.scheme==='Pisces'||NexT.CONFIG.scheme==='Gemini')return;const t=document.querySelector('.post-toc');let e=NexT.CONFIG.sidebar;typeof e!='boolean'&&(e=NexT.CONFIG.sidebar.display==='always'||NexT.CONFIG.sidebar.display==='post'&&t),e&&window.dispatchEvent(new Event('sidebar:show'))},activateSidebarPanel:function(e){const n=200,s=document.querySelector('.sidebar-inner'),o=document.querySelector('.sidebar-panel-container'),t=['sidebar-toc-active','sidebar-overview-active'];if(s.classList.contains(t[e]))return;window.anime({duration:n,targets:o,easing:'linear',opacity:0,translateY:[0,-20],complete:()=>{s.classList.replace(t[1-e],t[e]),window.anime({duration:n,targets:o,easing:'linear',opacity:[0,1],translateY:[-20,0]})}})},getStyle:function(t,n){const e=document.createElement('link');e.setAttribute('rel','stylesheet'),e.setAttribute('type','text/css'),e.setAttribute('href',t),(n||document.head).appendChild(e)},getScript:function(e,t={},o){if(typeof t=='function')return this.getScript(e,{condition:o}).then(t);const{condition:i=!1,attributes:{id:n='',async:a=!1,defer:r=!1,crossOrigin:s='',dataset:c={},...l}={},parentNode:d=null}=t;return new Promise((t,o)=>{if(i)t();else{const i=document.createElement('script');if(n&&(i.id=n),s&&(i.crossOrigin=s),i.async=a,i.defer=r,Object.assign(i.dataset,c),Object.entries(l).forEach(([e,t])=>{i.setAttribute(e,String(t))}),i.onload=t,i.onerror=o,typeof e=='object'){const{url:n,integrity:t}=e;i.src=n,t&&(i.integrity=t,i.crossOrigin='anonymous')}else i.src=e;(d||document.head).appendChild(i)}})},loadComments:function(e,t){return t?this.loadComments(e).then(t):new Promise(t=>{const n=document.querySelector(e);if(!n){t();return}const s=new IntersectionObserver((e,n)=>{const s=e[0];if(!s.isIntersecting)return;t(),n.disconnect()});s.observe(n)})}},NexT.boot={},NexT.boot.registerEvents=function(){NexT.utils.registerScrollPercent(),document.querySelector('.site-nav-toggle .toggle').addEventListener('click',t=>{t.currentTarget.classList.toggle('toggle-close');const e=document.querySelector('.site-nav');if(!e)return;e.style.setProperty('--scroll-height',e.scrollHeight+'px'),document.body.classList.toggle('site-nav-on')}),document.querySelectorAll('.sidebar-nav li').forEach((e,t)=>{e.addEventListener('click',()=>{NexT.utils.activateSidebarPanel(t)})}),window.addEventListener('hashchange',()=>{const e=location.hash;if(e!==''&&!e.match(/%\S{2}/)){const t=document.querySelector(`.tabs ul.nav-tabs li a[href="${e}"]`);t&&t.click()}})},NexT.boot.refresh=function(){if(!NexT.CONFIG.page.isPage)return;NexT.utils.registerSidebarTOC(),NexT.utils.replacePostCRLink(),NexT.utils.registerCopyCode(),NexT.utils.registerPostReward(),NexT.CONFIG.page.comments?(NexT.utils.initCommontesDispaly(),NexT.utils.registerCommonSwitch()):NexT.utils.hideCommontes()},NexT.boot.motion=function(){NexT.CONFIG.motion.enable&&NexT.motion.integrator.add(NexT.motion.middleWares.header).add(NexT.motion.middleWares.postList).add(NexT.motion.middleWares.sidebar).add(NexT.motion.middleWares.footer).bootstrap(),NexT.utils.updateSidebarPosition()},document.addEventListener('DOMContentLoaded',()=>{NexT.boot.registerEvents(),NexT.boot.motion(),NexT.boot.refresh()}),NexT.motion={},NexT.motion.integrator={queue:[],init:function(){return this.queue=[],this},add:function(t){const e=t();return NexT.CONFIG.motion.async?this.queue.push(e):this.queue=this.queue.concat(e),this},bootstrap:function(){NexT.CONFIG.motion.async||(this.queue=[this.queue]),this.queue.forEach(t=>{const e=window.anime.timeline({duration:200,easing:'linear'});t.forEach(t=>{t.deltaT?e.add(t,t.deltaT):e.add(t)})})}},NexT.motion.middleWares={header:function(){const t=[];function n(e){t.push({targets:e,scaleX:[0,1],duration:500,deltaT:'-=200'})}function e(e,n=!1){t.push({targets:e,opacity:1,top:0,deltaT:n?'-=200':'-=0'})}return e('header.header'),NexT.CONFIG.scheme==='Mist'&&n('.logo-line'),NexT.CONFIG.scheme==='Muse'&&e('.custom-logo-image'),e('.site-title'),e('.site-brand-container .toggle',!0),e('.site-subtitle'),(NexT.CONFIG.scheme==='Pisces'||NexT.CONFIG.scheme==='Gemini')&&e('.custom-logo-image'),document.querySelectorAll('.menu-item').forEach(e=>{t.push({targets:e,complete:()=>e.classList.add('animated','fadeInDown'),deltaT:'-=200'})}),t},subMenu:function(){const e=document.querySelectorAll('.sub-menu .menu-item');return e.length>0&&e.forEach(e=>{e.classList.add('animated')}),[]},postList:function(){const t=[],{postblock:n,postheader:s,postbody:o,collheader:i}=NexT.CONFIG.motion.transition;function e(e,n){if(!e)return;document.querySelectorAll(n).forEach(n=>{t.push({targets:n,complete:()=>n.classList.add('animated',e),deltaT:'-=100'})})}return e(n,'.post-block,.flinks-block, .pagination, .post-comments'),e(i,'.collection-header'),e(s,'.post-header'),e(o,'.post-body'),t},sidebar:function(){const e=document.querySelector('.sidebar'),t=NexT.CONFIG.motion.transition.sidebar;return t&&(NexT.CONFIG.scheme==='Pisces'||NexT.CONFIG.scheme==='Gemini')?[{targets:e,complete:()=>e.classList.add('animated',t)}]:[]},footer:function(){return[{targets:document.querySelector('.footer'),opacity:1}]}},document.addEventListener('DOMContentLoaded',()=>{'use strict';const e=()=>{localStorage.setItem('bookmark'+location.pathname,window.scrollY)},t=()=>{let e=localStorage.getItem('bookmark'+location.pathname);e=parseInt(e,10),!isNaN(e)&&location.hash===''&&window.anime({targets:document.scrollingElement,duration:200,easing:'linear',scrollTop:e})},n=function(s){const n=document.querySelector('.book-mark-link');window.addEventListener('scroll',()=>n.classList.toggle('book-mark-link-fixed',window.scrollY===0),{passive:!0}),s==='auto'&&(window.addEventListener('beforeunload',e),document.addEventListener('pjax:send',e)),n.addEventListener('click',()=>{e(),window.anime({targets:n,duration:200,easing:'linear',top:-30,complete:()=>{setTimeout(()=>{n.style.top=''},400)}})}),t(),document.addEventListener('pjax:success',t)};n(NexT.CONFIG.bookmark.save)}),document.addEventListener('DOMContentLoaded',()=>{const e='.addthis_inline_share_toolbox';if(!NexT.CONFIG.addthis||!NexT.utils.checkDOMExist(e))return;const t=NexT.CONFIG.addthis.js+'?pubid='+NexT.CONFIG.addthis.cfg.pubid;NexT.utils.loadComments(e).then(()=>{NexT.utils.getScript(t,{attributes:{async:!0},parentNode:document.querySelector(e)})})}),document.addEventListener('DOMContentLoaded',()=>{const e='.waline-container';if(!NexT.CONFIG.page.comments||!NexT.CONFIG.waline||!NexT.utils.checkDOMExist(e))return;const{emoji:t,imguploader:n,pageview:s,placeholder:o,requiredmeta:i,serverurl:a,wordlimit:r}=NexT.CONFIG.waline.cfg,c=NexT.utils.getCDNResource(NexT.CONFIG.waline.css);NexT.utils.getStyle(c,null);const l=NexT.utils.getCDNResource(NexT.CONFIG.waline.js),d={placeholder:o};NexT.utils.loadComments(e).then(()=>NexT.utils.getScript(l,{})).then(()=>{Waline.init({locale:d,el:e,pageview:s,emoji:t,imageUploader:n,wordLimit:r,requiredMeta:i,serverURL:a,lang:NexT.CONFIG.lang,dark:"auto"}),NexT.utils.hiddeLodingCmp(e)})}),document.addEventListener('DOMContentLoaded',()=>{const e='.giscus-container';if(!NexT.CONFIG.page.comments||!NexT.CONFIG.giscus||!NexT.utils.checkDOMExist(e))return;const{category:t,categoryid:n,emit:s,inputposition:o,mapping:i,reactions:a,repo:r,repoid:c,theme:l}=NexT.CONFIG.giscus.cfg;NexT.utils.loadComments(e).then(()=>NexT.utils.getScript(NexT.CONFIG.giscus.js,{attributes:{async:!0,crossorigin:'anonymous','data-repo':r,'data-repo-id':c,'data-category':t,'data-category-id':n,'data-mapping':i,'data-reactions-enabled':a?1:0,'data-emit-metadata':s?1:0,'data-input-position':o,'data-theme':l,'data-lang':NexT.CONFIG.lang,'data-loading':'lazy'},parentNode:document.querySelector(e)})),NexT.utils.hiddeLodingCmp(e)}),document.addEventListener('DOMContentLoaded',()=>{const e=NexT.utils.getCDNResource(NexT.CONFIG.algolia.js),t=NexT.utils.getCDNResource(NexT.CONFIG.algolia.instantjs);NexT.utils.getScript(e,{}),NexT.utils.getScript(t,{}).then(()=>{const{indexname:a,appid:r,apikey:s,hits:o}=NexT.CONFIG.algolia.cfg,i=a,t=instantsearch({indexName:i,searchClient:algoliasearch(r,s),searchFunction:e=>{document.querySelector('.search-input').value&&e.search()}}),n=function(e){return e.replaceAll("<mark>",'<mark class="search-keyword">')};typeof pjax=='object'&&t.on('render',()=>{pjax.refresh(document.querySelector('.algolia-hits'))}),t.addWidgets([instantsearch.widgets.configure({hitsPerPage:o.perpage||10}),instantsearch.widgets.searchBox({container:'.search-input-container',placeholder:NexT.CONFIG.i18n.placeholder,showReset:!1,showSubmit:!1,showLoadingIndicator:!0,cssClasses:{input:'search-input'}}),instantsearch.widgets.stats({container:'.algolia-stats',templates:{text:e=>{const t=NexT.CONFIG.i18n.hits_time.replace('${hits}',e.nbHits).replace('${time}',e.processingTimeMS);return`<span>${t}</span><img src="/imgs/algolia-logo.svg" alt="Algolia">`}},cssClasses:{text:'search-stats'}}),instantsearch.widgets.hits({container:'.algolia-hits',escapeHTML:!0,templates:{item:e=>{const{title:o,content:t}=e._highlightResult;let s=`<a href="${e.permalink}" class="search-result-title">${n(o.value)}</a>`;if(t&&t.value){const o=document.createElement('div');o.innerHTML=n(t.value),s+=`<a href="${e.permalink}"><p class="search-result">${o.innerHTML.substring(0,200)}...</p></a>`}return s},empty:e=>`<div class="algolia-hits-empty">
              ${NexT.CONFIG.i18n.empty.replace('${query}',e.query)}
            </div>`},cssClasses:{list:'search-result-list'}}),instantsearch.widgets.pagination({container:'.algolia-pagination',scrollTo:!1,showFirst:!0,showLast:!0,templates:{first:'<i class="fa fa-angle-double-left"></i>',last:'<i class="fa fa-angle-double-right"></i>',previous:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>'},cssClasses:{list:['pagination','algolia-pagination'],item:'pagination-item',link:'page-number',selectedItem:'current',disabledItem:'disabled-item'}})]),t.start(),document.querySelectorAll('.popup-trigger').forEach(e=>{e.addEventListener('click',()=>{document.body.classList.add('search-active'),setTimeout(()=>document.querySelector('.search-input').focus(),500)})});const e=()=>{document.body.classList.remove('search-active')};document.querySelector('.search-pop-overlay').addEventListener('click',t=>{t.target===document.querySelector('.search-pop-overlay')&&e()}),document.querySelector('.popup-btn-close').addEventListener('click',e),document.addEventListener('pjax:success',e),window.addEventListener('keyup',t=>{t.key==='Escape'&&e()})})})